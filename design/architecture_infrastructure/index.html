
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="F#の関数型プログラミングとドメイン駆動設計による注文受付システムの実装ガイド">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../data-model/">
      
      
        <link rel="next" href="../tech_stack/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>インフラ設計 - 注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#-" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ" class="md-header__button md-logo" aria-label="注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              インフラ設計
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/case-study-functional-ddd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-functional-ddd
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  ホーム

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../requirements/requirements_definition/" class="md-tabs__link">
          
  
  
  分析

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../architecture/" class="md-tabs__link">
          
  
  
  設計

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/iteration_plan-1/" class="md-tabs__link">
          
  
  
  開発プロセス

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/F%23%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-tabs__link">
          
  
  
  実装ガイド

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../operation/environment-setup-guide/" class="md-tabs__link">
          
  
  
  運用ドキュメント

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%8B%E3%82%89%E5%A7%8B%E3%82%81%E3%82%8BFSharp%E5%85%A5%E9%96%801/" class="md-tabs__link">
          
  
  
  F# 学習教材

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-tabs__link">
          
  
  
  開発理念

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ" class="md-nav__button md-logo" aria-label="注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    注文受付システム (OrderTaking) - 関数型ドメイン駆動設計ケーススタディ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/case-study-functional-ddd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    case-study-functional-ddd
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ホーム
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    分析
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements/requirements_definition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    要件定義
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements/business_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ビジネスユースケース
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements/system_usecase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    システムユースケース
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements/user_story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ユーザーストーリー
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    設計
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            設計
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    アーキテクチャ設計
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドメインモデル設計
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    データモデル設計
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    インフラ設計
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    インフラ設計
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      概要
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      インフラストラクチャ設計方針
    </span>
  </a>
  
    <nav class="md-nav" aria-label="インフラストラクチャ設計方針">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      基本原則
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      アーキテクチャスタイル
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      デプロイメントアーキテクチャ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="デプロイメントアーキテクチャ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#heroku" class="md-nav__link">
    <span class="md-ellipsis">
      Heroku アプリケーション構成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heroku アプリケーション構成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      アプリケーション設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dyno" class="md-nav__link">
    <span class="md-ellipsis">
      Dyno 構成
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      データベース設計
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データベース設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inmemory-database" class="md-nav__link">
    <span class="md-ellipsis">
      InMemory Database 構成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      データモデル定義
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbcontext" class="md-nav__link">
    <span class="md-ellipsis">
      DbContext 設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inmemory-database_1" class="md-nav__link">
    <span class="md-ellipsis">
      InMemory Database 設定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#heroku-add-ons" class="md-nav__link">
    <span class="md-ellipsis">
      Heroku Add-ons 構成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heroku Add-ons 構成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-papertrail" class="md-nav__link">
    <span class="md-ellipsis">
      1. Papertrail（ログ管理）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Papertrail（ログ管理）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      ログ構造化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-sendgrid" class="md-nav__link">
    <span class="md-ellipsis">
      2. SendGrid（メール送信）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. SendGrid（メール送信）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      メール送信実装
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-heroku-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      3. Heroku Scheduler（バッチ処理）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Heroku Scheduler（バッチ処理）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      スケジュールタスク例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cicd" class="md-nav__link">
    <span class="md-ellipsis">
      CI/CD パイプライン
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CI/CD パイプライン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-actions-heroku" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Actions → Heroku デプロイ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heroku-buildpack" class="md-nav__link">
    <span class="md-ellipsis">
      Heroku Buildpack 構成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heroku Buildpack 構成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#procfile" class="md-nav__link">
    <span class="md-ellipsis">
      Procfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#buildpacks" class="md-nav__link">
    <span class="md-ellipsis">
      .buildpacks（マルチビルドパック）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appjsonreview-apps" class="md-nav__link">
    <span class="md-ellipsis">
      app.json（Review Apps 用）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      環境構成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="環境構成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      環境別設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      環境変数管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="環境変数管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#heroku-config-vars" class="md-nav__link">
    <span class="md-ellipsis">
      Heroku Config Vars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appsettingsproductionjson" class="md-nav__link">
    <span class="md-ellipsis">
      appsettings.Production.json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      スケーリング戦略
    </span>
  </a>
  
    <nav class="md-nav" aria-label="スケーリング戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      水平スケーリング
    </span>
  </a>
  
    <nav class="md-nav" aria-label="水平スケーリング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      オートスケーリング設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      スケーリングポリシー
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dyno_1" class="md-nav__link">
    <span class="md-ellipsis">
      垂直スケーリング（Dyno タイプ変更）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      データ永続化戦略
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データ永続化戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inmemory-database_2" class="md-nav__link">
    <span class="md-ellipsis">
      InMemory Database の制約
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      データ永続化オプション（代替案）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データ永続化オプション（代替案）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. イベントソーシングパターン
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 定期スナップショット
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-heroku-scheduler_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. Heroku Scheduler による定期保存
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      データ監視
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      セキュリティ設計
    </span>
  </a>
  
    <nav class="md-nav" aria-label="セキュリティ設計">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#httpstls" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS/TLS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      環境変数の暗号化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      アプリケーションレベルセキュリティ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      監視とアラート
    </span>
  </a>
  
    <nav class="md-nav" aria-label="監視とアラート">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#papertrail" class="md-nav__link">
    <span class="md-ellipsis">
      Papertrail アラート設定
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      メトリクス監視
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      コスト見積もり
    </span>
  </a>
  
    <nav class="md-nav" aria-label="コスト見積もり">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      月額コスト試算
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      スケール時のコスト
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      ディザスタリカバリ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ディザスタリカバリ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rporto" class="md-nav__link">
    <span class="md-ellipsis">
      RPO/RTO 目標
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inmemory-db" class="md-nav__link">
    <span class="md-ellipsis">
      InMemory DB 環境でのリカバリ手順
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      データ損失への対応策
    </span>
  </a>
  
    <nav class="md-nav" aria-label="データ損失への対応策">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      オプション 1: スナップショット復元
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      オプション 2: イベント再生
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      オプション 3: マスタデータ再投入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      デプロイメント戦略
    </span>
  </a>
  
    <nav class="md-nav" aria-label="デプロイメント戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#heroku-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      ブルーグリーンデプロイメント（Heroku Pipelines）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      デプロイフロー
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      まとめ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      インフラストラクチャの特徴
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inmemory-db_1" class="md-nav__link">
    <span class="md-ellipsis">
      InMemory DB の適用シーン
    </span>
  </a>
  
    <nav class="md-nav" aria-label="InMemory DB の適用シーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      推奨される用途
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      推奨されない用途
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      段階的拡張計画
    </span>
  </a>
  
    <nav class="md-nav" aria-label="段階的拡張計画">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-inmemory-db" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: 初期構成（現在）- InMemory DB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: データ永続化対応
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: スケーリング対応
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 4: エンタープライズ対応
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 5: マイクロサービス移行（将来）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      結論
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tech_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    技術スタック
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    テスト戦略
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    開発プロセス
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            開発プロセス
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    イテレーション計画
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            イテレーション計画
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/iteration_plan-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Iteration 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/iteration_plan-2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Iteration 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    レトロスペクティブ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            レトロスペクティブ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/retrospective-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Retrospective 1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    デイリースタンドアップ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            デイリースタンドアップ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/process/daily-standup-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    スタンドアップガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/process/standup-logs/2025-01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    記録 2025-01
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    時間管理
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            時間管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/process/time-tracking-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    時間記録ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    実装ガイド
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            実装ガイド
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/F%23%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F# アプリケーション環境構築ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/F%23API%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F# API構築ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/UI%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UI設計ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    アーキテクチャ設計ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    インフラ設計ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%83%86%E3%82%B9%E3%83%88%E6%88%A6%E7%95%A5%E3%82%AC%E3%82%A4%E3%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    テスト戦略ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    運用ドキュメント
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            運用ドキュメント
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/environment-setup-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    環境セットアップ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/troubleshooting-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    トラブルシューティング
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CI/CD
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            CI/CD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/github-actions-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Actions ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    デプロイ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            デプロイ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/heroku-deploy-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Heroku デプロイガイド
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    品質管理
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            品質管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/quality/coverage-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    カバレッジガイド
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/quality/static-analysis-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    静的解析ガイド
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    F# 学習教材
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            F# 学習教材
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%8B%E3%82%89%E5%A7%8B%E3%82%81%E3%82%8BFSharp%E5%85%A5%E9%96%801/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F# TDD入門 第1部
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%8B%E3%82%89%E5%A7%8B%E3%82%81%E3%82%8BFSharp%E5%85%A5%E9%96%802/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F# TDD入門 第2部
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%8B%E3%82%89%E5%A7%8B%E3%82%81%E3%82%8BFSharp%E5%85%A5%E9%96%803/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F# TDD入門 第3部
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%8B%E3%82%89%E5%A7%8B%E3%82%81%E3%82%8BFSharp%E5%85%A5%E9%96%804/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F# TDD入門 第4部
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    開発理念
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            開発理念
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%82%88%E3%81%84%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%A8%E3%81%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    よいソフトウェアとは
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    エクストリームプログラミング
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="-">インフラストラクチャアーキテクチャ設計書 - 注文受付システム<a class="headerlink" href="#-" title="Permanent link">&para;</a></h1>
<h2 id="_1">概要<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本ドキュメントは、F# による関数型ドメインモデリングと ASP.NET Core を用いた注文受付システムのインフラストラクチャアーキテクチャを定義します。モノリシック構成で Heroku をクラウドプラットフォームとして採用し、インメモリデータベースを使用したシンプルなインフラを構築します。</p>
<p><strong>注意</strong>: 本構成はインメモリデータベースを使用するため、Dyno 再起動時にデータが失われます。永続化が必要な場合は別途バックアップ戦略が必要です。</p>
<h2 id="_2">インフラストラクチャ設計方針<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="_3">基本原則<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>シンプリシティ</strong>: モノリシック構成による管理の簡素化</li>
<li><strong>スケーラビリティ</strong>: Heroku のスケーリング機能を活用</li>
<li><strong>Infrastructure as Code</strong>: 設定のコード化とバージョン管理</li>
<li><strong>自動化</strong>: デプロイと運用の自動化</li>
<li><strong>コスト最適化</strong>: 開発初期は小規模構成、必要に応じてスケール</li>
</ol>
<h3 id="_4">アーキテクチャスタイル<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p><strong>モノリシックデプロイメント</strong>を採用します。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjYwNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTk4cHg7aGVpZ2h0OjYwNnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk5OCA2MDYiIHdpZHRoPSI5OThweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PHRpdGxlPiYjMTI0NTI7JiMxMjUzMTsmIzEyNTAxOyYjMTI1MjE7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjE7JiMxMjQ2MzsmIzEyNDgxOyYjMTI1MTU7JiMyNzA4MzsmIzI1MTA0OyYjMjIyNTk7IC0gSGVyb2t1ICYjMTI1MTQ7JiMxMjQ5NDsmIzEyNTIyOyYjMTI0NzE7JiMxMjQ4MzsmIzEyNDYzOyAoSW5NZW1vcnkgREIpPC90aXRsZT48ZGVmcy8+PGc+PGcgY2xhc3M9InRpdGxlIiBkYXRhLXNvdXJjZS1saW5lPSI0Ij48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDY3LjExOSIgeD0iMjU4LjYwNDgiIHk9IjIyLjk5NTEiPiYjMTI0NTI7JiMxMjUzMTsmIzEyNTAxOyYjMTI1MjE7JiMxMjQ3MzsmIzEyNDg4OyYjMTI1MjE7JiMxMjQ2MzsmIzEyNDgxOyYjMTI1MTU7JiMyNzA4MzsmIzI1MTA0OyYjMjIyNTk7IC0gSGVyb2t1ICYjMTI1MTQ7JiMxMjQ5NDsmIzEyNTIyOyYjMTI0NzE7JiMxMjQ4MzsmIzEyNDYzOyAoSW5NZW1vcnkgREIpPC90ZXh0PjwvZz48IS0tY2x1c3RlciBIZXJva3UgUGxhdGZvcm0tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Ikhlcm9rdSBQbGF0Zm9ybSIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJjbHVzdGVyX0hlcm9rdSBQbGF0Zm9ybSI+PHBhdGggZD0iTTguNSwxNTIuNjQ2OCBMMTM5Ljc4NjEsMTUyLjY0NjggQTMuNzUsMy43NSAwIDAgMSAxNDIuMjg2MSwxNTUuMTQ2OCBMMTQ5LjI4NjEsMTc0Ljk0MzcgTDc4Ni41LDE3NC45NDM3IEEyLjUsMi41IDAgMCAxIDc4OSwxNzcuNDQzNyBMNzg5LDU5Ny4zMzY4IEEyLjUsMi41IDAgMCAxIDc4Ni41LDU5OS44MzY4IEw4LjUsNTk5LjgzNjggQTIuNSwyLjUgMCAwIDEgNiw1OTcuMzM2OCBMNiwxNTUuMTQ2OCBBMi41LDIuNSAwIDAgMSA4LjUsMTUyLjY0NjgiIGZpbGw9IiM2NzYyQTYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSIxNDkuMjg2MSIgeTE9IjE3NC45NDM3IiB5Mj0iMTc0Ljk0MzciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwLjI4NjEiIHg9IjEwIiB5PSIxNjcuNjQyIj5IZXJva3UgUGxhdGZvcm08L3RleHQ+PC9nPjwhLS1jbHVzdGVyIFJ1bnRpbWUgRW52aXJvbm1lbnQtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IlJ1bnRpbWUgRW52aXJvbm1lbnQiIGRhdGEtc291cmNlLWxpbmU9IjkiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iY2x1c3Rlcl9SdW50aW1lIEVudmlyb25tZW50Ij48cGF0aCBkPSJNMzIuNSwxOTUuNjQ2OCBMMjA1LjM0ODYsMTk1LjY0NjggQTMuNzUsMy43NSAwIDAgMSAyMDcuODQ4NiwxOTguMTQ2OCBMMjE0Ljg0ODYsMjE3Ljk0MzcgTDc2Mi41LDIxNy45NDM3IEEyLjUsMi41IDAgMCAxIDc2NSwyMjAuNDQzNyBMNzY1LDQxMC43NDY4IEEyLjUsMi41IDAgMCAxIDc2Mi41LDQxMy4yNDY4IEwzMi41LDQxMy4yNDY4IEEyLjUsMi41IDAgMCAxIDMwLDQxMC43NDY4IEwzMCwxOTguMTQ2OCBBMi41LDIuNSAwIDAgMSAzMi41LDE5NS42NDY4IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSIzMCIgeDI9IjIxNC44NDg2IiB5MT0iMjE3Ljk0MzciIHkyPSIyMTcuOTQzNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzEuODQ4NiIgeD0iMzQiIHk9IjIxMC42NDIiPlJ1bnRpbWUgRW52aXJvbm1lbnQ8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHdlYjEtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IndlYjEiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImNsdXN0ZXJfd2ViMSI+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI2MiwyNTYuNjQ2OCw3MiwyNDYuNjQ2OCw1MTQsMjQ2LjY0NjgsNTE0LDM3MS4yNDY4LDUwNCwzODEuMjQ2OCw2MiwzODEuMjQ2OCw2MiwyNTYuNjQ2OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MDQiIHgyPSI1MTQiIHkxPSIyNTYuNjQ2OCIgeTI9IjI0Ni42NDY4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjYyIiB4Mj0iNTA0IiB5MT0iMjU2LjY0NjgiIHkyPSIyNTYuNjQ2OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MDQiIHgyPSI1MDQiIHkxPSIyNTYuNjQ2OCIgeTI9IjM4MS4yNDY4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5Ni43NjU2IiB4PSIxODUuNjE3MiIgeT0iMjcyLjY0MiI+V2ViIER5bm8gKFN0YW5kYXJkLTFYKTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgQWRkLW9ucy0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iQWRkLW9ucyIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iY2x1c3Rlcl9BZGQtb25zIj48cGF0aCBkPSJNMjgzLjUsNDYyLjI0NjggTDM0OS4xMDY0LDQ2Mi4yNDY4IEEzLjc1LDMuNzUgMCAwIDEgMzUxLjYwNjQsNDY0Ljc0NjggTDM1OC42MDY0LDQ4NC41NDM3IEw3NjIuNSw0ODQuNTQzNyBBMi41LDIuNSAwIDAgMSA3NjUsNDg3LjA0MzcgTDc2NSw1NzMuMzM2OCBBMi41LDIuNSAwIDAgMSA3NjIuNSw1NzUuODM2OCBMMjgzLjUsNTc1LjgzNjggQTIuNSwyLjUgMCAwIDEgMjgxLDU3My4zMzY4IEwyODEsNDY0Ljc0NjggQTIuNSwyLjUgMCAwIDEgMjgzLjUsNDYyLjI0NjgiIGZpbGw9IiNGRjk5MDAiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjI4MSIgeDI9IjM1OC42MDY0IiB5MT0iNDg0LjU0MzciIHkyPSI0ODQuNTQzNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NC42MDY0IiB4PSIyODUiIHk9IjQ3Ny4yNDIiPkFkZC1vbnM8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU44IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImVudDAwMDkiIGlkPSJlbnRpdHlfR01OOCI+PHBhdGggZD0iTTU0MS4zNywyODMuMTE2OCBMNTQxLjM3LDM2OC43ODA5IEw3NDguNjM1NiwzNjguNzgwOSBMNzQ4LjYzNTYsMjkzLjExNjggTDczOC42MzU2LDI4My4xMTY4IEw1NDEuMzcsMjgzLjExNjgiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik03MzguNjM1NiwyODMuMTE2OCBMNzM4LjYzNTYsMjkzLjExNjggTDc0OC42MzU2LDI5My4xMTY4IEw3MzguNjM1NiwyODMuMTE2OCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNS4zMjU4IiB4PSI1NDcuMzciIHk9IjMwMC4xODM3Ij4tIEYjICYjMTI0NTA7JiMxMjUwMzsmIzEyNTIyOyYjMTI0NjU7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEyLjgyMzQiIHg9IjU0Ny4zNyIgeT0iMzE1LjMxNjUiPi0gJiMxMjQ4OTsmIzEyNTEzOyYjMTI0NTI7JiMxMjUzMTsmIzEyNTI1OyYjMTI0NzI7JiMxMjQ4MzsmIzEyNDYzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjQuNTIyMSIgeD0iNTQ3LjM3IiB5PSIzMzAuNDQ5NCI+LSBBUEkgJiMxMjQ1NjsmIzEyNTMxOyYjMTI0ODk7JiMxMjUwOTsmIzEyNDUyOyYjMTI1MzE7JiMxMjQ4ODs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM4LjgyMzQiIHg9IjU0Ny4zNyIgeT0iMzQ1LjU4MjIiPi0gJiMzMzI1ODsmIzIxMjA1OyYjMTI0NzM7JiMxMjQ2NTsmIzEyNTQwOyYjMTI1MjI7JiMxMjUzMTsmIzEyNDY0OyYjMjM1NTA7JiMyNDU0MDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTg2LjI2NTYiIHg9IjU0Ny4zNyIgeT0iMzYwLjcxNSI+LSBFRiBDb3JlIEluTWVtb3J5IFByb3ZpZGVyPC90ZXh0PjwvZz48IS0tZW50aXR5IEFTUC5ORVQgQ29yZSBBcHBcbiguTkVUIDkuMCktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iQVNQLk5FVCBDb3JlIEFwcC5uLi5ORVQgOS4wLiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X0FTUC5ORVQgQ29yZSBBcHAubi4uTkVUIDkuMC4iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTY4LjE4NzUiIHg9Ijg1LjkxIiB5PSIyOTQuNjQ2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIyMzQuMDk3NSIgeT0iMjk5LjY0NjgiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjIzMi4wOTc1IiB5PSIzMDEuNjQ2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMjMyLjA5NzUiIHk9IjMwNS42NDY4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI4LjE4NzUiIHg9IjEwMC45MSIgeT0iMzI3LjY0MiI+QVNQLk5FVCBDb3JlIEFwcDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45NTkiIHg9IjEwMC45MSIgeT0iMzQzLjkzODgiPiguTkVUIDkuMCk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgSW5NZW1vcnkgRGF0YWJhc2UtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSW5NZW1vcnkgRGF0YWJhc2UiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImVudGl0eV9Jbk1lbW9yeSBEYXRhYmFzZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODEuMTg5NSIgeD0iMjg5LjQxIiB5PSIzMDIuNzk2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSI0NTAuNTk5NSIgeT0iMzA3Ljc5NjgiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjQ0OC41OTk1IiB5PSIzMDkuNzk2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNDQ4LjU5OTUiIHk9IjMxMy43OTY4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQxLjE4OTUiIHg9IjMwNC40MSIgeT0iMzM1Ljc5MiI+SW5NZW1vcnkgRGF0YWJhc2U8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUGFwZXJ0cmFpbFxuPz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJQYXBlcnRyYWlsLm4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfUGFwZXJ0cmFpbC5uLi4uLiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI2Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDcuODgwOSIgeD0iMjk3LjA2IiB5PSI0OTcuMjQ2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIzODQuOTQwOSIgeT0iNTAyLjI0NjgiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjM4Mi45NDA5IiB5PSI1MDQuMjQ2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMzgyLjk0MDkiIHk9IjUwOC4yNDY4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjcuODgwOSIgeD0iMzEyLjA2IiB5PSI1MzAuMjQyIj5QYXBlcnRyYWlsPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjMxMi4wNiIgeT0iNTQ2LjUzODgiPiYjMTI1MjU7JiMxMjQ2NDsmIzMxNjQ5OyYjMjk3MDI7PC90ZXh0PjwvZz48IS0tZW50aXR5IEhlcm9rdSBTY2hlZHVsZXJcbj8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ikhlcm9rdSBTY2hlZHVsZXIubi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImVudDAwMTMiIGlkPSJlbnRpdHlfSGVyb2t1IFNjaGVkdWxlci5uLi4uLi4iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNjIuNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTY0Ljk4MTQiIHg9IjU4NC41MSIgeT0iNDk3LjI0NjgiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iNzI5LjQ5MTQiIHk9IjUwMi4yNDY4Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSI3MjcuNDkxNCIgeT0iNTA0LjI0NjgiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjcyNy40OTE0IiB5PSI1MDguMjQ2OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNC45ODE0IiB4PSI1OTkuNTEiIHk9IjUzMC4yNDIiPkhlcm9rdSBTY2hlZHVsZXI8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTk5LjUxIiB5PSI1NDYuNTM4OCI+JiMxMjQ5NjsmIzEyNDgzOyYjMTI0ODE7JiMyMDk2NjsmIzI5NzAyOzwvdGV4dD48L2c+PCEtLWVudGl0eSBTZW5kR3JpZFxuPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iU2VuZEdyaWQubi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgZGF0YS11aWQ9ImVudDAwMTQiIGlkPSJlbnRpdHlfU2VuZEdyaWQubi4uLi4uIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjYyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwOS45OTk3IiB4PSI0NDAiIHk9IjQ5Ny4yNDY4Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjUyOS45OTk3IiB5PSI1MDIuMjQ2OCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNTI3Ljk5OTciIHk9IjUwNC4yNDY4Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSI1MjcuOTk5NyIgeT0iNTA4LjI0NjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2NC42NDA2IiB4PSI0NTUiIHk9IjUzMC4yNDIiPlNlbmRHcmlkPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQ1NSIgeT0iNTQ2LjUzODgiPiYjMTI1MTM7JiMxMjU0MDsmIzEyNTIzOyYjMzY4NjU7JiMyMDQ0OTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaW50ZXJuZXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iaW50ZXJuZXQiIGRhdGEtc291cmNlLWxpbmU9IjYiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iZW50aXR5X2ludGVybmV0Ij48cGF0aCBkPSJNNDUwLjM5MzcsNTIuMjAyNiBDNDU0LjA1NTYsNDcuMzIzMSA0NTguNDQ0MSw0Ni40NTY0IDQ2Mi4wNTgzLDUyLjI1NDcgQzQ2NC45ODc4LDQ2LjczODkgNDcwLjUxMTYsNDUuMjYxNSA0NzQuMzQ0LDUxLjI5NDEgQzQ3Ny40NjQ3LDQ1LjcwMDYgNDgwLjg0MTgsNDUuODg5NCA0ODQuNTU4LDUwLjcxIEM0ODguNjAwNSw0My44NDE4IDQ5Mi42NjMzLDQ1LjQ1OTUgNDk2Ljk2ODIsNTAuNDM1MiBDNDk5LjUzOTcsNDQuOTA1NSA1MDMuMDc2Myw0NC40MjI1IDUwNi43MDc0LDQ5LjQ1ODUgQzUxMS4zMDE4LDQzLjU5MjQgNTE1LjM0ODEsNDMuMjk2OSA1MTkuMjkzNyw1MC4xMDI5IEM1MjIuMDIyLDQ0LjkxOSA1MjcuMTE3Niw0NS40NTU2IDUyOS41MjMxLDUwLjQyOCBDNTMzLjI5MzIsNDQuODY3OSA1MzguMzMxOSw0NS4yMTYzIDU0MS4zOTI2LDUxLjE2IEM1NDUuMTQ3OSw0Ni40NTQxIDU0OS42ODI1LDQ2LjQzNDYgNTUyLjc0NSw1MS45MzEgQzU1NS40NjQsNDYuNDcyMSA1NjAuNzUwMiw0Ni40MzQ2IDU2My42NDc5LDUxLjc1MDIgQzU3MS4yMzM1LDU0Ljg5MzkgNTczLjQ1MDUsNjIuNTU0NyA1NjYuODYxLDY4LjQyOTIgQzU3MS45ODQxLDczLjcyNTYgNTcwLjY1MDIsNzkuODQ2MSA1NjMuMjU1OCw4MS43NTYyIEM1NjAuMjQyMyw4Ny4xMjc3IDU1NC44MDUxLDg4LjMyNDMgNTUxLjAyMzIsODIuNjAzNiBDNTQ3Ljg3MzIsODguNTU5NCA1NDMuNjE5MSw4Ny42ODg2IDUzOS43NzA3LDgzLjM2ODQgQzUzNi4wMDc5LDg3Ljk0MDcgNTMyLjQ0NDQsODkuMzgwNSA1MjguNTEzOCw4My41NDk5IEM1MjUuMzQ1OCw4OS4zMDI3IDUyMS4wMDYyLDg5LjQ3NDEgNTE3LjMzODIsODQuMDQ5NyBDNTE0LjQ0MzEsODguNDQ2NyA1MTAuNTQ3Myw4Ny43MTM4IDUwNy44Mjc5LDgzLjg0NzUgQzUwNC4zNjU0LDg4LjY2MjYgNDk5LjQ3MjgsODkuMDQ5MiA0OTYuMjk5Niw4My41MjUgQzQ5My4xNTE1LDg4LjcxNzEgNDg4LjAxOCw4OC45NjEgNDg0LjYzNSw4My43ODk0IEM0ODEuOTc1Nyw4OC45MjMzIDQ3Ni44NjIzLDkwLjIxNTggNDczLjU3MjQsODQuNDI4MSBDNDY5LjIxNzUsODkuNDE3MiA0NjQuNzc2Miw5MC4yMTIzIDQ2MS4yNzk5LDgzLjUyNDIgQzQ1Ny44ODUzLDg3Ljc5NTMgNDU0LjQ2OTQsODcuMjc1MyA0NTEuNzExOSw4Mi44MjUzIEM0NDMuMjM3OCw4MC4xNTEyIDQ0Mi4zNDE2LDcyLjYxMjUgNDQ4LjI0MzIsNjYuODIyNSBDNDQxLjY0OTIsNjEuMDE5NyA0NDIuMzM1Niw1NS44NSA0NTAuMzkzNyw1Mi4yMDI2IiBmaWxsPSIjRjFGMUYxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSI0NTciIHk9IjcxLjM1MiI+JiMxMjQ1MjsmIzEyNTMxOyYjMTI0Nzk7JiMxMjU0MDsmIzEyNDkzOyYjMTI0ODM7JiMxMjQ4ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xOSIgZGF0YS1zb3VyY2UtbGluZT0iMzYiIGRhdGEtdWlkPSJlbnQwMDIwIiBpZD0iZW50aXR5X0dNTjE5Ij48cGF0aCBkPSJNODA0LjY4LDUwOC40MDY4IEw4MDQuNjgsNTQ4LjY3MjUgTDk5MS4zMjg1LDU0OC42NzI1IEw5OTEuMzI4NSw1MTguNDA2OCBMOTgxLjMyODUsNTA4LjQwNjggTDgwNC42OCw1MDguNDA2OCIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTk4MS4zMjg1LDUwOC40MDY4IEw5ODEuMzI4NSw1MTguNDA2OCBMOTkxLjMyODUsNTE4LjQwNjggTDk4MS4zMjg1LDUwOC40MDY4IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1LjY0ODUiIHg9IjgxMC42OCIgeT0iNTI1LjQ3MzciPiYjMzU2ODY7JiMyMTU3ODs6IEluTWVtb3J5IERCICYjMTIzOTg7JiMxMjM4MzsmIzEyNDE3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTUuMDI4OSIgeD0iODEwLjY4IiB5PSI1NDAuNjA2NSI+RHlubyAmIzIwODc3OyYjMzYyMTU7JiMyMTIwNTsmIzEyMzkxOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMjgwNDA7JiMyMjgzMzs8L3RleHQ+PC9nPjwhLS1saW5rIHdlYjEgdG8gR01OOC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJ3ZWIxIiBkYXRhLWVudGl0eS0yPSJHTU44IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazEwIiBpZD0ibGlua193ZWIxX0dNTjgiPjxwYXRoIGQ9Ik01MTQuMDQzLDMyNS45NDY4IEM1MTQuMTMyMiwzMjUuOTQ2OCA1MTQuMjIxNSwzMjUuOTQ2OCA1MTQuMzEwOCwzMjUuOTQ2OCBDNTE0LjY2OCwzMjUuOTQ2OCA1MTUuMDI1MiwzMjUuOTQ2OCA1MTUuMzgyMywzMjUuOTQ2OCBDNTE4LjIzOTcsMzI1Ljk0NjggNTIxLjA5NjksMzI1Ljk0NjggNTIzLjk1MzgsMzI1Ljk0NjggQzUyOS42Njc1LDMyNS45NDY4IDUzNS4zOCwzMjUuOTQ2OCA1NDEuMDksMzI1Ljk0NjgiIGZpbGw9Im5vbmUiIGlkPSJ3ZWIxLUdNTjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLWxpbmsgaW50ZXJuZXQgdG8gd2ViMS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJpbnRlcm5ldCIgZGF0YS1lbnRpdHktMj0id2ViMSIgZGF0YS1zb3VyY2UtbGluZT0iMzAiIGRhdGEtdWlkPSJsbmsxNSIgaWQ9ImxpbmtfaW50ZXJuZXRfd2ViMSI+PHBhdGggZD0iTTUwNiw4OS44OTY4IEM1MDYsMTIwLjcyNjggNTA2LDE3OC4xNDkzIDUwNiwyMjguNTE4MSBDNTA2LDIzMS42NjYxIDUwNiwyMzQuNzg2NiA1MDYsMjM3Ljg3MTQgQzUwNiwyMzkuNDEzNyA1MDYsMjQwLjk0NzEgNTA2LDI0Mi40NzA2IEM1MDYsMjQzLjIzMjMgNTA2LDI0My45OTE1IDUwNiwyNDQuNzQ4MiBDNTA2LDI0NS4xMjY1IDUwNiwyMzkuNTA0MSA1MDYsMjM5Ljg4MTEiIGZpbGw9Im5vbmUiIGlkPSJpbnRlcm5ldC10by13ZWIxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1MDYsMjQ1Ljg4MTEsNTEwLDIzNi44ODExLDUwNiwyNDAuODgxMSw1MDIsMjM2Ljg4MTEsNTA2LDI0NS44ODExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDEuNzQ4NSIgeD0iNTA3IiB5PSIxMzIuNzEzNyI+SFRUUFM8L3RleHQ+PC9nPjwhLS1saW5rIHdlYjEgdG8gUGFwZXJ0cmFpbFxuPz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJ3ZWIxIiBkYXRhLWVudGl0eS0yPSJQYXBlcnRyYWlsLm4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzMSIgZGF0YS11aWQ9ImxuazE2IiBpZD0ibGlua193ZWIxX1BhcGVydHJhaWwubi4uLi4iPjxwYXRoIGQ9Ik01MDYuMDA3MSwzODEuNTI0NSBDNTA1Ljk3NzcsMzgxLjY4NTcgNTA1Ljk0NzksMzgxLjg0NyA1MDUuOTE3OCwzODIuMDA4MyBDNTA1Ljg1NzYsMzgyLjMzMDggNTA1Ljc5NiwzODIuNjUzMyA1MDUuNzMyOSwzODIuOTc1OCBDNTA1LjQ4MDYsMzg0LjI2NTUgNTA1LjIwNTUsMzg1LjU1NCA1MDQuOTA1OSwzODYuODM4NSBDNTA0LjMwNjgsMzg5LjQwNzQgNTAzLjYwOTgsMzkxLjk1OTkgNTAyLjgwMjMsMzk0LjQ3MjkgQzQ5OS41NzI1LDQwNC41MjUgNDk0LjU3NSw0MTMuOTQ0MyA0ODcsNDIxLjI0NjggQzQ3MS4xMSw0MzYuNTU2OCA0NTcuMzIsNDE4LjU4NjggNDM4LDQyOS4yNDY4IEM0MDkuMDYsNDQ1LjIwNjggMzg4LjM5MjQsNDY5LjY2NzkgMzcyLjk2MjQsNDkyLjE3NzkiIGZpbGw9Im5vbmUiIGlkPSJ3ZWIxLXRvLVBhcGVydHJhaWxcbiYjMTI1MjU7JiMxMjQ2NDsmIzMxNjQ5OyYjMjk3MDI7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNjkuNTcsNDk3LjEyNjgsMzc3Ljk1NzgsNDkxLjk2NSwzNzIuMzk3LDQ5My4wMDI3LDM3MS4zNTkzLDQ4Ny40NDE5LDM2OS41Nyw0OTcuMTI2OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjQzOSIgeT0iNDQyLjMxMzciPiYjMTI1MjU7JiMxMjQ2NDsmIzM2ODY1OyYjMjA0NDk7PC90ZXh0PjwvZz48IS0tbGluayB3ZWIxIHRvIFNlbmRHcmlkXG4/Pz8/Py0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJ3ZWIxIiBkYXRhLWVudGl0eS0yPSJTZW5kR3JpZC5uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjMyIiBkYXRhLXVpZD0ibG5rMTciIGlkPSJsaW5rX3dlYjFfU2VuZEdyaWQubi4uLi4uIj48cGF0aCBkPSJNNTAyLjk4MiwzODEuOTMxMSBDNTAyLjk1MzMsMzgyLjQ1MzYgNTAyLjkyNDYsMzgyLjk3ODEgNTAyLjg5NTcsMzgzLjUwNDcgQzUwMi44Mzc5LDM4NC41NTc3IDUwMi43Nzk4LDM4NS42MTg4IDUwMi43MjEyLDM4Ni42ODczIEM1MDIuNjA0LDM4OC44MjQzIDUwMi40ODUyLDM5MC45OTA3IDUwMi4zNjUsMzkzLjE4MTggQzUwMC40NDI1LDQyOC4yMzkzIDQ5OC41MDMxLDQ2My42MDU4IDQ5Ni45OTgxLDQ5MS4wODU4IiBmaWxsPSJub25lIiBpZD0id2ViMS10by1TZW5kR3JpZFxuJiMxMjUxMzsmIzEyNTQwOyYjMTI1MjM7JiMzNjg2NTsmIzIwNDQ5OyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDk2LjY3LDQ5Ny4wNzY4LDUwMS4xNTYyLDQ4OC4zMDksNDk2Ljk0MzQsNDkyLjA4NDMsNDkzLjE2ODIsNDg3Ljg3MTYsNDk2LjY3LDQ5Ny4wNzY4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzUuMjQ4NSIgeD0iNTAxLjE3IiB5PSI0NDIuMzEzNyI+U01UUDwvdGV4dD48L2c+PCEtLWxpbmsgSGVyb2t1IFNjaGVkdWxlclxuPz8/Pz8gdG8gd2ViMS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJIZXJva3UgU2NoZWR1bGVyLm4uLi4uLiIgZGF0YS1lbnRpdHktMj0id2ViMSIgZGF0YS1zb3VyY2UtbGluZT0iMzMiIGRhdGEtdWlkPSJsbmsxOCIgaWQ9ImxpbmtfSGVyb2t1IFNjaGVkdWxlci5uLi4uLi5fd2ViMSI+PHBhdGggZD0iTTYzNy4xMyw0OTYuOTA2OCBDNjEzLjk2LDQ3NC44OTY4IDU4MCw0NDYuMjE2OCA1NDUsNDI5LjI0NjggQzUzMC42NCw0MjIuMjc2OCA1MjAuMjEsNDMzLjUwNjggNTEwLDQyMS4yNDY4IEM1MDMuMzk1LDQxMy4zMTE4IDQ5OS43OTg4LDQwMy41NzEyIDQ5OC4xMzAzLDM5My4zOTQyIEM0OTcuNzEzMiwzOTAuODQ5OSA0OTcuNDE2NiwzODguMjc4NCA0OTcuMjIzNiwzODUuNzAxIEM0OTcuMTI3LDM4NC40MTIzIDQ5Ny4wNTY0LDM4My4xMjIxIDQ5Ny4wMDk2LDM4MS44MzMxIEM0OTcuMDAzOCwzODEuNjcyIDQ5Ny4xODg3LDM4Ny41MDc5IDQ5Ny4xODM1LDM4Ny4zNDY4IiBmaWxsPSJub25lIiBpZD0iSGVyb2t1IFNjaGVkdWxlclxuJiMxMjQ5NjsmIzEyNDgzOyYjMTI0ODE7JiMyMDk2NjsmIzI5NzAyOy10by13ZWIxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0OTYuOTkzMiwzODEuMzQ5OCw0OTMuMjgwOCwzOTAuNDcyMiw0OTcuMTUxOCwzODYuMzQ3Myw1MDEuMjc2NywzOTAuMjE4NCw0OTYuOTkzMiwzODEuMzQ5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjUyLjAwMDEiIHg9IjU3MS45NyIgeT0iNDQyLjMxMzciPiYjMjM0NTA7JiMyNjM5OTsmIzIzNDU1OyYjMzQ4OTI7PC90ZXh0PjwvZz48IS0tbGluayB3ZWIxIHRvIEdNTjE5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IndlYjEiIGRhdGEtZW50aXR5LTI9IkdNTjE5IiBkYXRhLXNvdXJjZS1saW5lPSIzNiIgZGF0YS11aWQ9ImxuazIxIiBpZD0ibGlua193ZWIxX0dNTjE5Ij48cGF0aCBkPSJNNDk1Ljg2MTksMzgxLjM4MDMgQzQ5NS44NjUzLDM4MS41NDE1IDQ5NS44NjkxLDM4MS43MDI3IDQ5NS44NzMyLDM4MS44NjQgQzQ5NS44ODE1LDM4Mi4xODY0IDQ5NS44OTE0LDM4Mi41MDg5IDQ5NS45MDI5LDM4Mi44MzEzIEM0OTUuOTQ5LDM4NC4xMjA5IDQ5Ni4wMjEyLDM4NS40MDk3IDQ5Ni4xMjE4LDM4Ni42OTQ3IEM0OTYuMzIzMSwzODkuMjY0NiA0OTYuNjM4MSwzOTEuODE5NiA0OTcuMDg1NSwzOTQuMzM2NSBDNDk4Ljg3NSw0MDQuNDA0MyA1MDIuNzgyNSw0MTMuODY0MyA1MTAsNDIxLjI0NjggQzUxOS41Nyw0MzEuMDM2OCA2MTkuNDEsNDI3LjUxNjggNjMzLDQyOS4yNDY4IEM2OTIuMjQsNDM2Ljc0NjggNzA4LjgyLDQzNC4wMjY4IDc2NSw0NTQuMjQ2OCBDODAyLjgzLDQ2Ny44NTY4IDg0Mi43OSw0OTEuMjU2OCA4NjguOTEsNTA3Ljk1NjgiIGZpbGw9Im5vbmUiIGlkPSJ3ZWIxLUdNTjE5IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjwhLS1TUkM9W1pMOTFKbkQxNkJ0RmhuWU1JdGpPS1pwS2I4RDlmUXFiMmpycVFwRzFPaFJUQU1uZVB2aGY1NEU4WVJrSnEyZll3ZTZPQUFRZjRiMEMxSzhLSk9wekNVRU0tWS1TdE1yZkVQMXVzemR0dml0eHRsaWNKNUlxQzhCZlAzUHBfLTZKc1NvM0oxUEVIY3o3UnlNWk82ODBuWEU5cDg4LTE1RWZNMm1JME8xUGg4SVdTRk81Rm5UeUxfMGxtbGFmVUNGX0UxN1M1bG5KeHQyeHJzWXd4eS1YMmpFOGFoS1E1Rm9adUF5NUZuQkVYVTFTS2M1ZTNpLVpDZzRSQzc0dDM0MlhINmVjTDBSQUpiVm1OdUJsVTVwVUtBMUhYSFBjWTZCNDBBV09YSkxaMUs1YjhBd0wzNU9hakFuUzdzWHBIQ3BNQ0JGQTIyUm5rYUs5QllGQzU4YlpPYWhtNFNoM24wT2NDQUdwMHZpNkRUTmZuczdfcFFTZUZvcnZZdDVUY3JmOHZrMGllSkFPSWNLOVhfbnBSMmVJTldRQmVxYUNQa0lEQWJlNnB3R3VHdjFRQXdpQ2FnQWwxNUlPY2ZKUG9JWlUtYjZTVUtEd1dIcEFjSUtnLTBsMXN5RG1adU5wOHlYQUdkNWpKanh5eDBFSXo2NThRYVlpTnB6b2p0VXo3Vzk1QVVyNVVFZ1VfN1F4VXZBR0owTkVodG5nYkFuUjlnODBPSER3SGdOVktMZm5xckc5aFloTkxxMzZlMWFMSDFhcmhEOEl6bHNUTmRSUWJ5cWo2UzZXMmhzbVlpblEyTDZGcUZKUml6dHdHUzNIdk1sdGc2THdNRGl0LWxObFNfakZqLXQ1OUdxQzZ1UWdVWVU4VldRY1NwYkQxX3gxLXRrcDFTYURwZTdhczlNUmR2THR6RmNTelpfa25wc3ZkTlV6bFBSUlFWTlJocTNHU3Z1bUhpZk5IVlVGM3ptdEJzVldzOGYzT05VNHRIQUUzVm5iU3hUcy1qeWtsRHZpc054VHR1SGt4dGwzdEoteFFrS1ZdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h2 id="_5">デプロイメントアーキテクチャ<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="heroku">Heroku アプリケーション構成<a class="headerlink" href="#heroku" title="Permanent link">&para;</a></h3>
<h4 id="_6">アプリケーション設定<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>設定値</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>App Name</strong></td>
<td>ordertaking-app</td>
<td>アプリケーション識別子</td>
</tr>
<tr>
<td><strong>Region</strong></td>
<td>US または Europe</td>
<td>地理的配置</td>
</tr>
<tr>
<td><strong>Stack</strong></td>
<td>heroku-22</td>
<td>Ubuntu 22.04 ベース</td>
</tr>
<tr>
<td><strong>Runtime</strong></td>
<td>.NET 9.0</td>
<td>F# 実行環境</td>
</tr>
<tr>
<td><strong>Dyno Type</strong></td>
<td>Standard-1X</td>
<td>512MB RAM、1X CPU</td>
</tr>
</tbody>
</table>
<h4 id="dyno">Dyno 構成<a class="headerlink" href="#dyno" title="Permanent link">&para;</a></h4>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM5OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTg1MHB4O2hlaWdodDozOThweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxODUwIDM5OCIgd2lkdGg9IjE4NTBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIER5bm8gQ29uZmlndXJhdGlvbi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iRHlubyBDb25maWd1cmF0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfRHlubyBDb25maWd1cmF0aW9uIj48cGF0aCBkPSJNOC41LDc2Ljc2IEwxNjIuODcxMSw3Ni43NiBBMy43NSwzLjc1IDAgMCAxIDE2NS4zNzExLDc5LjI2IEwxNzIuMzcxMSw5OS4wNTY5IEwxODQwLjUsOTkuMDU2OSBBMi41LDIuNSAwIDAgMSAxODQzLDEwMS41NTY5IEwxODQzLDM4OC45NyBBMi41LDIuNSAwIDAgMSAxODQwLjUsMzkxLjQ3IEw4LjUsMzkxLjQ3IEEyLjUsMi41IDAgMCAxIDYsMzg4Ljk3IEw2LDc5LjI2IEEyLjUsMi41IDAgMCAxIDguNSw3Ni43NiIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB4MT0iNiIgeDI9IjE3Mi4zNzExIiB5MT0iOTkuMDU2OSIgeTI9Ijk5LjA1NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUzLjM3MTEiIHg9IjEwIiB5PSI5MS43NTUxIj5EeW5vIENvbmZpZ3VyYXRpb248L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHdlYi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0id2ViIiBkYXRhLXNvdXJjZS1saW5lPSIyIiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImNsdXN0ZXJfd2ViIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIzMS43MSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYxMCIgeD0iMzgiIHk9IjEyNy43NiIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNSIgeD0iNjI4IiB5PSIxMzIuNzYiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0IiB4PSI2MjYiIHk9IjEzNC43NiIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9IjYyNiIgeT0iMTM4Ljc2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgwLjE2NSIgeD0iMzAyLjkxNzUiIHk9IjE1My43NTUxIj5XZWIgRHlubzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgd29ya2VyLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJ3b3JrZXIiIGRhdGEtc291cmNlLWxpbmU9IjkiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iY2x1c3Rlcl93b3JrZXIiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjMxLjcxIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNjI3IiB4PSI2ODgiIHk9IjEyNy43NiIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNSIgeD0iMTI5NSIgeT0iMTMyLjc2Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iMTI5MyIgeT0iMTM0Ljc2Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iMTI5MyIgeT0iMTM4Ljc2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4Ny43OTY5IiB4PSI5MDcuNjAxNiIgeT0iMTUzLjc1NTEiPldvcmtlciBEeW5vIChPcHRpb25hbCk8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xMiIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDEzIiBpZD0iZW50aXR5X0dNTjEyIj48cGF0aCBkPSJNMTM0Mi41OSwxNTguNjQgTDEzNDIuNTksMjI5LjE3MTMgTDE1OTMuNDEzNSwyMjkuMTcxMyBMMTU5My40MTM1LDE2OC42NCBMMTU4My40MTM1LDE1OC42NCBMMTM0Mi41OSwxNTguNjQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xNTgzLjQxMzUsMTU4LjY0IEwxNTgzLjQxMzUsMTY4LjY0IEwxNTkzLjQxMzUsMTY4LjY0IEwxNTgzLjQxMzUsMTU4LjY0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTYuMzc5OSIgeD0iMTM0OC41OSIgeT0iMTc1LjcwNjkiPiYjMjY0MTI7JiMzMDA1ODsmIzI5ODcyOyYjMjI2NTk7OjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ny44NzciIHg9IjEzNDguNTkiIHk9IjE5MC44Mzk3Ij4tICYjMjYzNjg7JiMyMzU2Nzs6IDEgZHlubzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDIuOTIwOSIgeD0iMTM0OC41OSIgeT0iMjA1Ljk3MjUiPi0gJiMyNjM2ODsmIzIyODIzOzogMTAgZHlub3M8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjI5LjgyMzUiIHg9IjEzNDguNTkiIHk9IjIyMS4xMDUzIj4tICYjMTI1MTM7JiMxMjQ4ODsmIzEyNTIyOyYjMTI0NjM7JiMxMjQ3MzsmIzMwNDM1OyYjMzUyMjI7JiMxMjM5NTsmIzEyNDI0OyYjMTI0Mjc7JiMxMjQ1ODsmIzEyNTQwOyYjMTI0ODg7JiMxMjQ3MzsmIzEyNDY1OyYjMTI1NDA7JiMxMjUyMzs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xNSIgZGF0YS1zb3VyY2UtbGluZT0iMjMiIGRhdGEtdWlkPSJlbnQwMDE2IiBpZD0iZW50aXR5X0dNTjE1Ij48cGF0aCBkPSJNMTYyOC41OSwxNTguNjQgTDE2MjguNTksMjI5LjE3MTMgTDE4MjcuNDEzNCwyMjkuMTcxMyBMMTgyNy40MTM0LDE2OC42NCBMMTgxNy40MTM0LDE1OC42NCBMMTYyOC41OSwxNTguNjQiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xODE3LjQxMzQsMTU4LjY0IEwxODE3LjQxMzQsMTY4LjY0IEwxODI3LjQxMzQsMTY4LjY0IEwxODE3LjQxMzQsMTU4LjY0IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuMzgiIHg9IjE2MzQuNTkiIHk9IjE3NS43MDY5Ij4mIzIzNTU4OyYjMjY0Njk7JiMyNTMxMzsmIzI0MzczOyYjMjk5OTI7OjwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzcuODIzNCIgeD0iMTYzNC41OSIgeT0iMTkwLjgzOTciPi0gJiMxMjQ5NjsmIzEyNDgzOyYjMTI0NjM7JiMxMjQ2NDsmIzEyNTIxOyYjMTI0NTQ7JiMxMjUzMTsmIzEyNDg5OyYjMTI0NzI7JiMxMjUxOTsmIzEyNTAyOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODYuODIzMyIgeD0iMTYzNC41OSIgeT0iMjA1Ljk3MjUiPi0gJiMxMjQ1MjsmIzEyNTA1OyYjMTI1MzE7JiMxMjQ4ODsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjczLjgyMzMiIHg9IjE2MzQuNTkiIHk9IjIyMS4xMDUzIj4tICYjMTI0OTY7JiMxMjQ4MzsmIzEyNDgxOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUHJvY2VzcyBUeXBlOiB3ZWItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUHJvY2VzcyBUeXBlLiB3ZWIiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X1Byb2Nlc3MgVHlwZS4gd2ViIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE3MC41NjY0IiB4PSI2MS43MiIgeT0iMTcwLjc2Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjIxMi4yODY0IiB5PSIxNzUuNzYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjIxMC4yODY0IiB5PSIxNzcuNzYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjIxMC4yODY0IiB5PSIxODEuNzYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAuNTY2NCIgeD0iNzYuNzIiIHk9IjIwMy43NTUxIj5Qcm9jZXNzIFR5cGU6IHdlYjwvdGV4dD48L2c+PCEtLWVudGl0eSBDb21tYW5kOiBkb3RuZXQgT3JkZXJUYWtpbmcuV2ViQXBpLmRsbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJDb21tYW5kLiBkb3RuZXQgT3JkZXJUYWtpbmcuV2ViQXBpLmRsbCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfQ29tbWFuZC4gZG90bmV0IE9yZGVyVGFraW5nLldlYkFwaS5kbGwiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMzM3LjY3MDkiIHg9IjI2Ny4xNiIgeT0iMTcwLjc2Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjU4NC44MzA5IiB5PSIxNzUuNzYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjU4Mi44MzA5IiB5PSIxNzcuNzYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjU4Mi44MzA5IiB5PSIxODEuNzYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOTcuNjcwOSIgeD0iMjgyLjE2IiB5PSIyMDMuNzU1MSI+Q29tbWFuZDogZG90bmV0IE9yZGVyVGFraW5nLldlYkFwaS5kbGw8L3RleHQ+PC9nPjwhLS1lbnRpdHkgU2NhbGU6IDEtMTAtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iU2NhbGUuIDEtMTAiIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X1NjYWxlLiAxLTEwIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjExOC42MDY0IiB4PSI4Ny43IiB5PSIyODkuMTciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMTg2LjMwNjQiIHk9IjI5NC4xNyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTg0LjMwNjQiIHk9IjI5Ni4xNyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTg0LjMwNjQiIHk9IjMwMC4xNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4LjYwNjQiIHg9IjEwMi43IiB5PSIzMjIuMTY1MSI+U2NhbGU6IDEtMTA8L3RleHQ+PC9nPjwhLS1lbnRpdHkgQXV0by1zY2FsaW5nOiBFbmFibGVkLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkF1dG8tc2NhbGluZy4gRW5hYmxlZCIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfQXV0by1zY2FsaW5nLiBFbmFibGVkIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE5Mi40MDcyIiB4PSIyNDEuOCIgeT0iMjg5LjE3Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjQxNC4yMDcyIiB5PSIyOTQuMTciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjQxMi4yMDcyIiB5PSIyOTYuMTciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjQxMi4yMDcyIiB5PSIzMDAuMTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTIuNDA3MiIgeD0iMjU2LjgiIHk9IjMyMi4xNjUxIj5BdXRvLXNjYWxpbmc6IEVuYWJsZWQ8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUHJvY2VzcyBUeXBlOiB3b3JrZXItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUHJvY2VzcyBUeXBlLiB3b3JrZXIiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9Qcm9jZXNzIFR5cGUuIHdvcmtlciI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODkuODY0MyIgeD0iNzEyLjA3IiB5PSIxNzAuNzYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iODgxLjkzNDMiIHk9IjE3NS43NiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iODc5LjkzNDMiIHk9IjE3Ny43NiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iODc5LjkzNDMiIHk9IjE4MS43NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OS44NjQzIiB4PSI3MjcuMDciIHk9IjIwMy43NTUxIj5Qcm9jZXNzIFR5cGU6IHdvcmtlcjwvdGV4dD48L2c+PCEtLWVudGl0eSBDb21tYW5kOiBkb3RuZXQgT3JkZXJUYWtpbmcuV29ya2VyLmRsbC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJDb21tYW5kLiBkb3RuZXQgT3JkZXJUYWtpbmcuV29ya2VyLmRsbCIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5X0NvbW1hbmQuIGRvdG5ldCBPcmRlclRha2luZy5Xb3JrZXIuZGxsIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjMzNC42MTUyIiB4PSI5MzYuNjkiIHk9IjE3MC43NiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxMjUxLjMwNTIiIHk9IjE3NS43NiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTI0OS4zMDUyIiB5PSIxNzcuNzYiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjEyNDkuMzA1MiIgeT0iMTgxLjc2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjk0LjYxNTIiIHg9Ijk1MS42OSIgeT0iMjAzLjc1NTEiPkNvbW1hbmQ6IGRvdG5ldCBPcmRlclRha2luZy5Xb3JrZXIuZGxsPC90ZXh0PjwvZz48IS0tZW50aXR5IFNjYWxlOiAwLTItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iU2NhbGUuIDAtMiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iZW50aXR5X1NjYWxlLiAwLTIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA5LjY5OTIiIHg9Ijc1Mi4xNSIgeT0iMjg5LjE3Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9Ijg0MS44NDkyIiB5PSIyOTQuMTciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjgzOS44NDkyIiB5PSIyOTYuMTciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjgzOS44NDkyIiB5PSIzMDAuMTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS42OTkyIiB4PSI3NjcuMTUiIHk9IjMyMi4xNjUxIj5TY2FsZTogMC0yPC90ZXh0PjwvZz48IS0tbGluayB3ZWIgdG8gR01OMTItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0id2ViIiBkYXRhLWVudGl0eS0yPSJHTU4xMiIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJsbmsxNCIgaWQ9Imxpbmtfd2ViX0dNTjEyIj48cGF0aCBkPSJNNjQ4LjAwNTcsMTQ1LjE4MzggQzY0OC4xMjIxLDE0NC43MDU1IDY0OC4yNDAyLDE0NC4yMjU0IDY0OC4zNTk5LDE0My43NDM1IEM2NDguODM4NiwxNDEuODE1OSA2NDkuMzQzNywxMzkuODU5OSA2NDkuODc2NCwxMzcuODgwOCBDNjUwLjk0MiwxMzMuOTIyNyA2NTIuMTE4MywxMjkuODcxOSA2NTMuNDE2MywxMjUuNzcgQzY2My44LDkyLjk1NSA2ODEuOTcsNTYuODcgNzEzLjUsMzguNzYgQzc3MC41NCw2IDEyNDQuNDQsMTQuMjkgMTMwNS41LDM4Ljc2IEMxMzY1LjQyLDYyLjc3IDE0MTUuNzgsMTIwLjU4IDE0NDMuOSwxNTguNDUiIGZpbGw9Im5vbmUiIGlkPSJ3ZWItR01OMTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLWxpbmsgd29ya2VyIHRvIEdNTjE1LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IndvcmtlciIgZGF0YS1lbnRpdHktMj0iR01OMTUiIGRhdGEtc291cmNlLWxpbmU9IjIzIiBkYXRhLXVpZD0ibG5rMTciIGlkPSJsaW5rX3dvcmtlcl9HTU4xNSI+PHBhdGggZD0iTTEyOTUuMDA1NCwxMjcuNTY1NyBDMTI5NC45NDg2LDEyNi41MzU0IDEyOTQuODk4NywxMjUuNTAxNiAxMjk0Ljg1NjIsMTI0LjQ2NSBDMTI5My40OTc1LDkxLjI5NSAxMjk5LjczLDU1LjI4NSAxMzI4LjUsMzguNzYgQzEzNzkuNTcsOS40MyAxNTM5LjkzLDE0LjMgMTU5My41LDM4Ljc2IEMxNjQ3LjAxLDYzLjE5IDE2ODcuNDEsMTIwLjU4IDE3MDkuMzgsMTU4LjI5IiBmaWxsPSJub25lIiBpZD0id29ya2VyLUdNTjE1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjwhLS1TUkM9W1hPX0ZJbTkxNUNWbHlyU3lGREwxcU92eFktZlNhRDBYRjhwa1A4bGhwQkF4NFg1MnBlMFA3T2VlOFJBM19UM0k4MkUyWEZ3Um54aHo2U3NFS2VJN1JsQy14X2xjVlB2N0luTFFQZjFRdFVTMkxXSlZTU2VyZHVRRXUyYXU4MkxIekdIZEY4Sks1WWoyNGFlMTNNMUY1bVRhVXlDTjlITzRhRF90YzlOMDBqYlU0VEtndlJPNWpXV3YyczdUanZjVmZuTTdicEZ3WnNORm9UWWtndUVSOVVoZ2dMbXdiek5MU1lxS3dLMFpkUkRXWlRFWW8tbTJnUENfM2lBbENEemVtQ0F3YnJYSVR0NWdENnRESW5kLWR2UzlfVk5BZmZWQ1VZdjIxaHZKdFdyMXgyR3RhYWRkRVJ1U25FVVp3NVBQOTBzSnBjNHFFak1OV0F0NVBrMi1ocTdNYTQwWkw1cktCTEczYjJ5ZW5fN3J0TFVsWk9xWG9YUkE0dkczTDl6OUc4dkhsZmh0YTMxa0d4OXpwaTdPYWNaS2REbXlKNHd3cVVUeFZGNWVjSXJkZzlIUENLQnJYQkE3d1d0TENTZUZMN3JLeFVZZTV2eXJhd0l5SHRMYmtnclZFMXJOWkhkdjRRWF8wbTAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_7">データベース設計<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<h4 id="inmemory-database">InMemory Database 構成<a class="headerlink" href="#inmemory-database" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>設定値</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Provider</strong></td>
<td>EF Core InMemory</td>
<td>Entity Framework Core InMemory プロバイダー</td>
</tr>
<tr>
<td><strong>永続性</strong></td>
<td>なし</td>
<td>Dyno 再起動で全データ消失</td>
</tr>
<tr>
<td><strong>パフォーマンス</strong></td>
<td>高速</td>
<td>ディスク I/O なし</td>
</tr>
<tr>
<td><strong>用途</strong></td>
<td>開発・テスト・デモ</td>
<td>本番環境での使用には注意が必要</td>
</tr>
</tbody>
</table>
<h4 id="_8">データモデル定義<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>既存のデータモデル設計書に基づき、以下のエンティティを Entity Framework Core で定義します：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Domain/Entities.fs</span>
<span class="k">module</span><span class="w"> </span><span class="nn">OrderTaking.Domain.Entities</span>

<span class="k">open</span><span class="w"> </span><span class="nn">System</span>
<span class="k">open</span><span class="w"> </span><span class="nn">System.ComponentModel.DataAnnotations</span>
<span class="k">open</span><span class="w"> </span><span class="nn">System.ComponentModel.DataAnnotations.Schema</span>

<span class="o">[&lt;</span><span class="n">Table</span><span class="o">(</span><span class="s">&quot;orders&quot;</span><span class="o">)&gt;]</span>
<span class="k">type</span><span class="w"> </span><span class="nc">OrderEntity</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Key</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">OrderId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">CustomerFirstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">CustomerLastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">CustomerEmail</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ShippingAddressLine1</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ShippingAddressLine2</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ShippingAddressCity</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ShippingAddressZipCode</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">BillingAddressLine1</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">BillingAddressLine2</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">BillingAddressCity</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">BillingAddressZipCode</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">OrderStatus</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">TotalAmount</span><span class="o">:</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0m</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">CreatedAt</span><span class="o">:</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">UpdatedAt</span><span class="o">:</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>

<span class="o">[&lt;</span><span class="n">Table</span><span class="o">(</span><span class="s">&quot;order_lines&quot;</span><span class="o">)&gt;]</span>
<span class="k">type</span><span class="w"> </span><span class="nc">OrderLineEntity</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Key</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">OrderLineId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">OrderId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ProductCode</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ProductType</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">Quantity</span><span class="o">:</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0m</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">UnitPrice</span><span class="o">:</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0m</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">LineTotal</span><span class="o">:</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0m</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">LineOrder</span><span class="o">:</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>

<span class="o">[&lt;</span><span class="n">Table</span><span class="o">(</span><span class="s">&quot;products&quot;</span><span class="o">)&gt;]</span>
<span class="k">type</span><span class="w"> </span><span class="nc">ProductEntity</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Key</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ProductCode</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ProductName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ProductType</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">UnitPrice</span><span class="o">:</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0m</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">IsActive</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">CreatedAt</span><span class="o">:</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">UpdatedAt</span><span class="o">:</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>

<span class="o">[&lt;</span><span class="n">Table</span><span class="o">(</span><span class="s">&quot;domain_events&quot;</span><span class="o">)&gt;]</span>
<span class="k">type</span><span class="w"> </span><span class="nc">DomainEventEntity</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Key</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">EventId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">EventType</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">EventData</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">AggregateId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="o">[&lt;</span><span class="n">Required</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">AggregateType</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">EventVersion</span><span class="o">:</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">OccurredAt</span><span class="o">:</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="k">val</span><span class="w"> </span><span class="n">ProcessedAt</span><span class="o">:</span><span class="w"> </span><span class="n">Nullable</span><span class="o">&lt;</span><span class="n">DateTime</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Nullable</span><span class="bp">()</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="o">,</span><span class="w"> </span><span class="n">set</span>
</code></pre></div>
<h4 id="dbcontext">DbContext 設定<a class="headerlink" href="#dbcontext" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Infrastructure/OrderContext.fs</span>
<span class="k">module</span><span class="w"> </span><span class="nn">OrderTaking.Infrastructure.OrderContext</span>

<span class="k">open</span><span class="w"> </span><span class="nn">Microsoft.EntityFrameworkCore</span>
<span class="k">open</span><span class="w"> </span><span class="nn">OrderTaking.Domain.Entities</span>

<span class="k">type</span><span class="w"> </span><span class="nc">OrderContext</span><span class="o">(</span><span class="n">options</span><span class="o">:</span><span class="w"> </span><span class="n">DbContextOptions</span><span class="o">&lt;</span><span class="n">OrderContext</span><span class="o">&gt;)</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">inherit</span><span class="w"> </span><span class="n">DbContext</span><span class="o">(</span><span class="n">options</span><span class="o">)</span>

<span class="w">    </span><span class="o">[&lt;</span><span class="n">DefaultValue</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">val</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="o">_</span><span class="n">orders</span><span class="o">:</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">OrderEntity</span><span class="o">&gt;</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="nf">Orders</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">orders</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">orders</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">v</span>

<span class="w">    </span><span class="o">[&lt;</span><span class="n">DefaultValue</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">val</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="o">_</span><span class="n">orderLines</span><span class="o">:</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">OrderLineEntity</span><span class="o">&gt;</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="nf">OrderLines</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">orderLines</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">orderLines</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">v</span>

<span class="w">    </span><span class="o">[&lt;</span><span class="n">DefaultValue</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">val</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="o">_</span><span class="n">products</span><span class="o">:</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">ProductEntity</span><span class="o">&gt;</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="nf">Products</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">products</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">products</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">v</span>

<span class="w">    </span><span class="o">[&lt;</span><span class="n">DefaultValue</span><span class="o">&gt;]</span>
<span class="w">    </span><span class="k">val</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="o">_</span><span class="n">domainEvents</span><span class="o">:</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">DomainEventEntity</span><span class="o">&gt;</span>
<span class="w">    </span><span class="k">member</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="nf">DomainEvents</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">get</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">domainEvents</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">._</span><span class="n">domainEvents</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">v</span>

<span class="w">    </span><span class="k">override</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="nf">OnModelCreating</span><span class="o">(</span><span class="n">modelBuilder</span><span class="o">:</span><span class="w"> </span><span class="n">ModelBuilder</span><span class="o">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">base</span><span class="o">.</span><span class="n">OnModelCreating</span><span class="o">(</span><span class="n">modelBuilder</span><span class="o">)</span>

<span class="w">        </span><span class="c1">// Index 定義</span>
<span class="w">        </span><span class="n">modelBuilder</span><span class="o">.</span><span class="n">Entity</span><span class="o">&lt;</span><span class="n">OrderEntity</span><span class="o">&gt;</span><span class="bp">()</span>
<span class="w">            </span><span class="o">.</span><span class="n">HasIndex</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">o</span><span class="o">.</span><span class="n">CustomerEmail</span><span class="w"> </span><span class="o">:&gt;</span><span class="w"> </span><span class="kt">obj</span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">HasDatabaseName</span><span class="o">(</span><span class="s">&quot;idx_orders_customer_email&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>

<span class="w">        </span><span class="n">modelBuilder</span><span class="o">.</span><span class="n">Entity</span><span class="o">&lt;</span><span class="n">OrderLineEntity</span><span class="o">&gt;</span><span class="bp">()</span>
<span class="w">            </span><span class="o">.</span><span class="n">HasIndex</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">ol</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ol</span><span class="o">.</span><span class="n">OrderId</span><span class="w"> </span><span class="o">:&gt;</span><span class="w"> </span><span class="kt">obj</span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">HasDatabaseName</span><span class="o">(</span><span class="s">&quot;idx_order_lines_order_id&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>

<span class="w">        </span><span class="n">modelBuilder</span><span class="o">.</span><span class="n">Entity</span><span class="o">&lt;</span><span class="n">DomainEventEntity</span><span class="o">&gt;</span><span class="bp">()</span>
<span class="w">            </span><span class="o">.</span><span class="n">HasIndex</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">de</span><span class="o">.</span><span class="n">AggregateId</span><span class="w"> </span><span class="o">:&gt;</span><span class="w"> </span><span class="kt">obj</span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">HasDatabaseName</span><span class="o">(</span><span class="s">&quot;idx_domain_events_aggregate&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>
</code></pre></div>
<h4 id="inmemory-database_1">InMemory Database 設定<a class="headerlink" href="#inmemory-database_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// WebApi/Program.fs</span>
<span class="k">let</span><span class="w"> </span><span class="nv">configureServices</span><span class="w"> </span><span class="o">(</span><span class="n">services</span><span class="o">:</span><span class="w"> </span><span class="n">IServiceCollection</span><span class="o">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="c1">// InMemory Database 設定</span>
<span class="w">    </span><span class="n">services</span><span class="o">.</span><span class="n">AddDbContext</span><span class="o">&lt;</span><span class="n">OrderContext</span><span class="o">&gt;(</span><span class="k">fun</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">options</span><span class="o">.</span><span class="n">UseInMemoryDatabase</span><span class="o">(</span><span class="s">&quot;OrderTakingDb&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>
<span class="w">    </span><span class="o">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>

<span class="w">    </span><span class="n">services</span>
</code></pre></div>
<h2 id="heroku-add-ons">Heroku Add-ons 構成<a class="headerlink" href="#heroku-add-ons" title="Permanent link">&para;</a></h2>
<h3 id="1-papertrail">1. Papertrail（ログ管理）<a class="headerlink" href="#1-papertrail" title="Permanent link">&para;</a></h3>
<h4 id="_9">設定<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>設定値</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Plan</strong></td>
<td>Choklad (無料)</td>
</tr>
<tr>
<td><strong>保持期間</strong></td>
<td>7日間</td>
</tr>
<tr>
<td><strong>検索</strong></td>
<td>フルテキスト検索対応</td>
</tr>
</tbody>
</table>
<h4 id="_10">ログ構造化<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Serilog による構造化ログ</span>
<span class="k">module</span><span class="w"> </span><span class="nn">Logging</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">open</span><span class="w"> </span><span class="nn">Serilog</span>

<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">configureLogger</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">LoggerConfiguration</span><span class="bp">()</span>
<span class="w">            </span><span class="o">.</span><span class="n">MinimumLevel</span><span class="o">.</span><span class="n">Information</span><span class="bp">()</span>
<span class="w">            </span><span class="o">.</span><span class="n">Enrich</span><span class="o">.</span><span class="n">FromLogContext</span><span class="bp">()</span>
<span class="w">            </span><span class="o">.</span><span class="n">Enrich</span><span class="o">.</span><span class="n">WithProperty</span><span class="o">(</span><span class="s">&quot;Application&quot;</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;OrderTaking&quot;</span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">Enrich</span><span class="o">.</span><span class="n">WithProperty</span><span class="o">(</span><span class="s">&quot;Environment&quot;</span><span class="o">,</span><span class="w"> </span><span class="n">getEnvironment</span><span class="bp">()</span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">WriteTo</span><span class="o">.</span><span class="n">Console</span><span class="o">(</span>
<span class="w">                </span><span class="n">outputTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;[{Timestamp:yyyy-MM-dd HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}&quot;</span>
<span class="w">            </span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">CreateLogger</span><span class="bp">()</span>
</code></pre></div>
<h3 id="2-sendgrid">2. SendGrid（メール送信）<a class="headerlink" href="#2-sendgrid" title="Permanent link">&para;</a></h3>
<h4 id="_11">設定<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>設定値</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Plan</strong></td>
<td>Starter (無料 - 月12,000通)</td>
</tr>
<tr>
<td><strong>認証</strong></td>
<td>API Key</td>
</tr>
<tr>
<td><strong>送信元</strong></td>
<td>noreply@ordertaking-app.com</td>
</tr>
</tbody>
</table>
<h4 id="_12">メール送信実装<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="nn">EmailService</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">open</span><span class="w"> </span><span class="nn">SendGrid</span>
<span class="w">    </span><span class="k">open</span><span class="w"> </span><span class="nn">SendGrid.Helpers.Mail</span>

<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">sendOrderConfirmation</span><span class="w"> </span><span class="o">(</span><span class="n">order</span><span class="o">:</span><span class="w"> </span><span class="n">PricedOrder</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">apiKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">Environment</span><span class="p">.</span><span class="n">GetEnvironmentVariable</span><span class="o">(</span><span class="s">&quot;SENDGRID_API_KEY&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SendGridClient</span><span class="o">(</span><span class="n">apiKey</span><span class="o">)</span>

<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EmailAddress</span><span class="o">(</span><span class="s">&quot;noreply@ordertaking-app.com&quot;</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;Order Taking System&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="s">&quot;注文確認 - {order.OrderId |&gt; OrderId.value}&quot;</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">toEmail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">order</span><span class="o">.</span><span class="n">CustomerInfo</span><span class="o">.</span><span class="n">EmailAddress</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">EmailAddress</span><span class="p">.</span><span class="n">value</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">toName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="s">&quot;{order.CustomerInfo.LastName |&gt; String50.value} {order.CustomerInfo.FirstName |&gt; String50.value}&quot;</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">``to``</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EmailAddress</span><span class="o">(</span><span class="n">toEmail</span><span class="o">,</span><span class="w"> </span><span class="n">toName</span><span class="o">)</span>

<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">htmlContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateOrderConfirmationHtml</span><span class="w"> </span><span class="n">order</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">MailHelper</span><span class="p">.</span><span class="n">CreateSingleEmail</span><span class="o">(</span><span class="n">from</span><span class="o">,</span><span class="w"> </span><span class="n">``to``</span><span class="o">,</span><span class="w"> </span><span class="n">subject</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="o">,</span><span class="w"> </span><span class="n">htmlContent</span><span class="o">)</span>

<span class="w">        </span><span class="k">let!</span><span class="w"> </span><span class="nv">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">SendEmailAsync</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Async</span><span class="p">.</span><span class="n">AwaitTask</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">IsSuccessStatusCode</span>
<span class="w">    </span><span class="o">}</span>
</code></pre></div>
<h3 id="3-heroku-scheduler">3. Heroku Scheduler（バッチ処理）<a class="headerlink" href="#3-heroku-scheduler" title="Permanent link">&para;</a></h3>
<h4 id="_13">設定<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>設定値</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Plan</strong></td>
<td>Standard (無料)</td>
</tr>
<tr>
<td><strong>実行頻度</strong></td>
<td>日次・時間・10分間隔</td>
</tr>
</tbody>
</table>
<h4 id="_14">スケジュールタスク例<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># 毎日午前2時に未処理イベントをクリーンアップ</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>cleanup-events

<span class="c1"># 1時間ごとに期限切れ注文をチェック</span>
<span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>check-expired-orders
</code></pre></div>
<h2 id="cicd">CI/CD パイプライン<a class="headerlink" href="#cicd" title="Permanent link">&para;</a></h2>
<h3 id="github-actions-heroku">GitHub Actions → Heroku デプロイ<a class="headerlink" href="#github-actions-heroku" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># .github/workflows/deploy.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to Heroku</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout code</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup .NET</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-dotnet@v3</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">dotnet-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;9.0.x&#39;</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Restore dependencies</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dotnet restore</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dotnet build --configuration Release --no-restore</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dotnet test --no-build --verbosity normal</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy to Heroku</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">akhileshns/heroku-deploy@v3.12.14</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">heroku_api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{secrets.HEROKU_API_KEY}}</span>
<span class="w">          </span><span class="nt">heroku_app_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ordertaking-app&quot;</span>
<span class="w">          </span><span class="nt">heroku_email</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{secrets.HEROKU_EMAIL}}</span>
</code></pre></div>
<h3 id="heroku-buildpack">Heroku Buildpack 構成<a class="headerlink" href="#heroku-buildpack" title="Permanent link">&para;</a></h3>
<h4 id="procfile">Procfile<a class="headerlink" href="#procfile" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>web: cd src/OrderTaking.WebApi &amp;&amp; dotnet OrderTaking.WebApi.dll --urls http://0.0.0.0:$PORT
</code></pre></div>
<h4 id="buildpacks">.buildpacks（マルチビルドパック）<a class="headerlink" href="#buildpacks" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>https://github.com/jincod/dotnetcore-buildpack
</code></pre></div>
<h4 id="appjsonreview-apps">app.json（Review Apps 用）<a class="headerlink" href="#appjsonreview-apps" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderTaking App&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;F# 関数型ドメインモデリング - 注文受付システム (InMemory DB)&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;repository&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/yourusername/ordertaking-app&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;fsharp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dotnet&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ddd&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;functional&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;inmemory&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;stack&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;heroku-22&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;buildpacks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/jincod/dotnetcore-buildpack&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ASPNETCORE_ENVIRONMENT&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ASP.NET Core environment&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Production&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;SENDGRID_API_KEY&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SendGrid API Key&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;DATABASE_PROVIDER&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Database provider (InMemory)&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;InMemory&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;formation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;web&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;quantity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;standard-1x&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;addons&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;papertrail:choklad&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;sendgrid:starter&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="_15">環境構成<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<h3 id="_16">環境別設定<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM5OXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTczMnB4O2hlaWdodDozOTlweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzMyIDM5OSIgd2lkdGg9IjE3MzJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Ii4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iY2x1c3Rlcl8uLi4uIj48cGF0aCBkPSJNOC41LDUxLjc0IEw2NS40OTk4LDUxLjc0IEEzLjc1LDMuNzUgMCAwIDEgNjcuOTk5OCw1NC4yNCBMNzQuOTk5OCw3NC4wMzY5IEwxNDk4LjUsNzQuMDM2OSBBMi41LDIuNSAwIDAgMSAxNTAxLDc2LjUzNjkgTDE1MDEsMzg5LjgzIEEyLjUsMi41IDAgMCAxIDE0OTguNSwzOTIuMzMgTDguNSwzOTIuMzMgQTIuNSwyLjUgMCAwIDEgNiwzODkuODMgTDYsNTQuMjQgQTIuNSwyLjUgMCAwIDEgOC41LDUxLjc0IiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHgxPSI2IiB4Mj0iNzQuOTk5OCIgeTE9Ijc0LjAzNjkiIHkyPSI3NC4wMzY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1Ljk5OTgiIHg9IjEwIiB5PSI2Ni43MzUxIj4mIzI5ODcyOyYjMjI2NTk7JiMyNzA4MzsmIzI1MTA0OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgZGV2LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJkZXYiIGRhdGEtc291cmNlLWxpbmU9IjIiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iY2x1c3Rlcl9kZXYiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjU3LjU5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDI0IiB4PSIzOCIgeT0iMTAyLjc0Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1IiB4PSI0NDIiIHk9IjEwNy43NCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9IjQ0MCIgeT0iMTA5Ljc0Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iNDQwIiB5PSIxMTMuNzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjkxOCIgeD0iMTk3LjU0MSIgeT0iMTI4LjczNTEiPkRldmVsb3BtZW50PC90ZXh0PjwvZz48IS0tY2x1c3RlciBzdGFnaW5nLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJzdGFnaW5nIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImNsdXN0ZXJfc3RhZ2luZyI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMzIuMjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0MDAiIHg9IjUwMiIgeT0iMTAyLjc0Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1IiB4PSI4ODIiIHk9IjEwNy43NCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9Ijg4MCIgeT0iMTA5Ljc0Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iODgwIiB5PSIxMTMuNzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTc5LjQxNiIgeD0iNjEyLjI5MiIgeT0iMTI4LjczNTEiPlN0YWdpbmcgKFJldmlldyBBcHBzKTwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgcHJvZC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0icHJvZCIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iY2x1c3Rlcl9wcm9kIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjI1Ny41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUyNyIgeD0iOTQyIiB5PSIxMDIuNzQiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTUiIHg9IjE0NDkiIHk9IjEwNy43NCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9IjE0NDciIHk9IjEwOS43NCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9IjE0NDciIHk9IjExMy43NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ni4xNDY1IiB4PSIxMTYyLjQyNjgiIHk9IjEyOC43MzUxIj5Qcm9kdWN0aW9uPC90ZXh0PjwvZz48IS0tZW50aXR5IExvY2FsIC5ORVQgOS4wLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkxvY2FsIC5ORVQgOS4wIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9Mb2NhbCAuTkVUIDkuMCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDAuMDE2NiIgeD0iNjEuOTkiIHk9IjE2NC43NCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxODIuMDA2NiIgeT0iMTY5Ljc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxODAuMDA2NiIgeT0iMTcxLjc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxODAuMDA2NiIgeT0iMTc1Ljc0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAwLjAxNjYiIHg9Ijc2Ljk5IiB5PSIxOTcuNzM1MSI+TG9jYWwgLk5FVCA5LjA8L3RleHQ+PC9nPjwhLS1lbnRpdHkgSW5NZW1vcnkgRGF0YWJhc2UtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSW5NZW1vcnkgRGF0YWJhc2UiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X0luTWVtb3J5IERhdGFiYXNlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4MS4xODk1IiB4PSIyMzcuNDEiIHk9IjE2NC43NCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIzOTguNTk5NSIgeT0iMTY5Ljc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzOTYuNTk5NSIgeT0iMTcxLjc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzOTYuNTk5NSIgeT0iMTc1Ljc0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQxLjE4OTUiIHg9IjI1Mi40MSIgeT0iMTk3LjczNTEiPkluTWVtb3J5IERhdGFiYXNlPC90ZXh0PjwvZz48IS0tZW50aXR5IENvbnNvbGUgTG9nZ2luZy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJDb25zb2xlIExvZ2dpbmciIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X0NvbnNvbGUgTG9nZ2luZyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNTUuODE0NSIgeD0iNjIuMDkiIHk9IjI5MC4wMyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxOTcuOTA0NSIgeT0iMjk1LjAzIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxOTUuOTA0NSIgeT0iMjk3LjAzIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxOTUuOTA0NSIgeT0iMzAxLjAzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE1LjgxNDUiIHg9Ijc3LjA5IiB5PSIzMjMuMDI1MSI+Q29uc29sZSBMb2dnaW5nPC90ZXh0PjwvZz48IS0tZW50aXR5IEhlcm9rdSBEeW5vIChob2JieSktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSGVyb2t1IER5bm8gLmhvYmJ5LiIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfSGVyb2t1IER5bm8gLmhvYmJ5LiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxOTAuMjY3NiIgeD0iNTI1Ljg3IiB5PSIxNjQuNzQiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iNjk2LjEzNzYiIHk9IjE2OS43NCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNjk0LjEzNzYiIHk9IjE3MS43NCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNjk0LjEzNzYiIHk9IjE3NS43NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MC4yNjc2IiB4PSI1NDAuODciIHk9IjE5Ny43MzUxIj5IZXJva3UgRHlubyAoaG9iYnkpPC90ZXh0PjwvZz48IS0tZW50aXR5IFBhcGVydHJhaWwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUGFwZXJ0cmFpbCIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X1BhcGVydHJhaWwiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA3Ljg4MDkiIHg9Ijc1MS4wNiIgeT0iMTY0Ljc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjgzOC45NDA5IiB5PSIxNjkuNzQiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjgzNi45NDA5IiB5PSIxNzEuNzQiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjgzNi45NDA5IiB5PSIxNzUuNzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2Ny44ODA5IiB4PSI3NjYuMDYiIHk9IjE5Ny43MzUxIj5QYXBlcnRyYWlsPC90ZXh0PjwvZz48IS0tZW50aXR5IEhlcm9rdSBEeW5vIChzdGFuZGFyZC0xeCktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iSGVyb2t1IER5bm8gLnN0YW5kYXJkLTF4LiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iZW50aXR5X0hlcm9rdSBEeW5vIC5zdGFuZGFyZC0xeC4iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjMxLjM1ODQiIHg9Ijk2Ni4zMiIgeT0iMTY0Ljc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjExNzcuNjc4NCIgeT0iMTY5Ljc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxMTc1LjY3ODQiIHk9IjE3MS43NCIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTE3NS42Nzg0IiB5PSIxNzUuNzQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTEuMzU4NCIgeD0iOTgxLjMyIiB5PSIxOTcuNzM1MSI+SGVyb2t1IER5bm8gKHN0YW5kYXJkLTF4KTwvdGV4dD48L2c+PCEtLWVudGl0eSBQYXBlcnRyYWlsICsgU2VuZEdyaWQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUGFwZXJ0cmFpbCAuIFNlbmRHcmlkIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfUGFwZXJ0cmFpbCAuIFNlbmRHcmlkIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE5My4xNTIzIiB4PSIxMjMyLjQyIiB5PSIxNjQuNzQiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iMTQwNS41NzIzIiB5PSIxNjkuNzQiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE0MDMuNTcyMyIgeT0iMTcxLjc0Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxNDAzLjU3MjMiIHk9IjE3NS43NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My4xNTIzIiB4PSIxMjQ3LjQyIiB5PSIxOTcuNzM1MSI+UGFwZXJ0cmFpbCArIFNlbmRHcmlkPC90ZXh0PjwvZz48IS0tZW50aXR5IEF1dG8tc2NhbGluZy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJBdXRvLXNjYWxpbmciIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0iZW50MDAxMyIgaWQ9ImVudGl0eV9BdXRvLXNjYWxpbmciPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI2LjY2NiIgeD0iMTAxOC42NyIgeT0iMjkwLjAzIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjExMjUuMzM2IiB5PSIyOTUuMDMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjExMjMuMzM2IiB5PSIyOTcuMDMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjExMjMuMzM2IiB5PSIzMDEuMDMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ni42NjYiIHg9IjEwMzMuNjciIHk9IjMyMy4wMjUxIj5BdXRvLXNjYWxpbmc8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xNiIgZGF0YS1zb3VyY2UtbGluZT0iMjYiIGRhdGEtdWlkPSJlbnQwMDE3IiBpZD0iZW50aXR5X0dNTjE2Ij48cGF0aCBkPSJNMTUxNi44NywyOTMuMDUgTDE1MTYuODcsMzMzLjMxNTYgTDE3MjUuMTM4NywzMzMuMzE1NiBMMTcyNS4xMzg3LDMwMy4wNSBMMTcxNS4xMzg3LDI5My4wNSBMMTUxNi44NywyOTMuMDUiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0xNzE1LjEzODcsMjkzLjA1IEwxNzE1LjEzODcsMzAzLjA1IEwxNzI1LjEzODcsMzAzLjA1IEwxNzE1LjEzODcsMjkzLjA1IiBmaWxsPSIjRkVGRkREIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTg3LjI2ODciIHg9IjE1MjIuODciIHk9IjMxMC4xMTY5Ij4mIzIwODQwOyYjMjk4NzI7JiMyMjY1OTsmIzEyMzkxOyBJbk1lbW9yeSBEQiAmIzEyNDM0OyYjMjAzNTE7JiMyOTk5Mjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcyLjE2MTMiIHg9IjE1MjIuODciIHk9IjMyNS4yNDk3Ij4mIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyMzk5OyBEeW5vICYjMjA4Nzc7JiMzNjIxNTsmIzIxMjA1OyYjMTIzOTE7JiMyODA0MDsmIzIyODMzOzwvdGV4dD48L2c+PCEtLWxpbmsgZGV2IHRvIHN0YWdpbmctLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZGV2IiBkYXRhLWVudGl0eS0yPSJzdGFnaW5nIiBkYXRhLXNvdXJjZS1saW5lPSIyMSIgZGF0YS11aWQ9ImxuazE0IiBpZD0ibGlua19kZXZfc3RhZ2luZyI+PHBhdGggZD0iTTQ2Mi4xMzY2LDEzNy4zNTM0IEM0NjIuNTcxOSwxMzUuNjk1NyA0NjMuMDMwMiwxMzQuMDIyIDQ2My41MTI1LDEzMi4zMzYyIEM0NzEuMjMsMTA1LjM2NSA0ODUuMTE1LDc1LjMzIDUxMCw1OS4wMSBDNTc3LjgzLDE0LjUzIDgxMy42MSw2IDg3NSw1OS4wMSBDODg1LjQ0MjUsNjguMDI1IDg5MS45ODc1LDgwLjA2MTIgODk1Ljg5OTQsOTMuMTY3IEM4OTYuMzg4NCw5NC44MDUzIDg5Ni44MzYyLDk2LjQ2MDIgODk3LjI0NTQsOTguMTI4IEM4OTcuNDUsOTguOTYxOSA4OTcuNjQ0OSw5OS43OTkxIDg5Ny44MzA0LDEwMC42MzkgQzg5Ny45MjMyLDEwMS4wNTg5IDg5OC4wMTM2LDEwMS40Nzk1IDg5OC4xMDE4LDEwMS45MDA4IEM4OTguMTQ1OCwxMDIuMTExNCA4OTYuOTkyOSw5Ni40NDI3IDg5Ny4wMzU5LDk2LjY1MzciIGZpbGw9Im5vbmUiIGlkPSJkZXYtdG8tc3RhZ2luZyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODk4LjIzMjMsMTAyLjUzMzIsOTAwLjM1NzMsOTIuOTE2Myw4OTcuMjM1Myw5Ny42MzM2LDg5Mi41MTgsOTQuNTExNSw4OTguMjMyMywxMDIuNTMzMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgwLjgyNDciIHg9IjYzMSIgeT0iMzEuODA2OSI+UHVsbCBSZXF1ZXN0PC90ZXh0PjwvZz48IS0tbGluayBzdGFnaW5nIHRvIHByb2QtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0ic3RhZ2luZyIgZGF0YS1lbnRpdHktMj0icHJvZCIgZGF0YS1zb3VyY2UtbGluZT0iMjIiIGRhdGEtdWlkPSJsbmsxNSIgaWQ9Imxpbmtfc3RhZ2luZ19wcm9kIj48cGF0aCBkPSJNOTAyLjEzNjYsMTM3LjM1MzQgQzkwMi41NzE5LDEzNS42OTU3IDkwMy4wMzAyLDEzNC4wMjIgOTAzLjUxMjUsMTMyLjMzNjIgQzkxMS4yMywxMDUuMzY1IDkyNS4xMTUsNzUuMzMgOTUwLDU5LjAxIEM5OTUuNzEsMjkuMDMgMTQwMC42MiwyMy4yOSAxNDQyLDU5LjAxIEMxNDUyLjQ0MjUsNjguMDI1IDE0NTguOTg3NSw4MC4wNjEyIDE0NjIuODk5NCw5My4xNjcgQzE0NjMuMzg4NCw5NC44MDUzIDE0NjMuODM2Miw5Ni40NjAyIDE0NjQuMjQ1NCw5OC4xMjggQzE0NjQuNDUsOTguOTYxOSAxNDY0LjY0NDksOTkuNzk5MSAxNDY0LjgzMDQsMTAwLjYzOSBDMTQ2NC45MjMyLDEwMS4wNTg5IDE0NjUuMDEzNiwxMDEuNDc5NSAxNDY1LjEwMTgsMTAxLjkwMDggQzE0NjUuMTQ1OCwxMDIuMTExNCAxNDYzLjk5MjksOTYuNDQyNyAxNDY0LjAzNTksOTYuNjUzNyIgZmlsbD0ibm9uZSIgaWQ9InN0YWdpbmctdG8tcHJvZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ2NS4yMzIzLDEwMi41MzMyLDE0NjcuMzU3Myw5Mi45MTYzLDE0NjQuMjM1Myw5Ny42MzM2LDE0NTkuNTE4LDk0LjUxMTUsMTQ2NS4yMzIzLDEwMi41MzMyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQuNjA1NSIgeD0iMTEzMCIgeT0iMzEuODA2OSI+TWVyZ2UgdG8gbWFpbjwvdGV4dD48L2c+PCEtLWxpbmsgcHJvZCB0byBHTU4xNi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJwcm9kIiBkYXRhLWVudGl0eS0yPSJHTU4xNiIgZGF0YS1zb3VyY2UtbGluZT0iMjYiIGRhdGEtdWlkPSJsbmsxOCIgaWQ9ImxpbmtfcHJvZF9HTU4xNiI+PHBhdGggZD0iTTE0NjkuMDUzMSwxOTUuMDg1NSBDMTQ2OS4yNjgsMTk1LjI1MTIgMTQ2OS40ODY3LDE5NS40MTk3IDE0NjkuNzA5MiwxOTUuNTkxMiBDMTQ3MC4xNTQxLDE5NS45MzQxIDE0NzAuNjE0MSwxOTYuMjg4NiAxNDcxLjA4ODYsMTk2LjY1NDQgQzE0NzIuOTg2OCwxOTguMTE3MyAxNDc1LjExNzcsMTk5Ljc1OTUgMTQ3Ny40NTA2LDIwMS41NTc1IEMxNDg2Ljc4MjUsMjA4Ljc0OTQgMTQ5OS4zNDc1LDIxOC40MzI1IDE1MTMuMTgsMjI5LjA5MjUgQzE1NDAuODQ1LDI1MC40MTI1IDE1NzMuNTgsMjc1LjY0IDE1OTUuNjYsMjkyLjY2IiBmaWxsPSJub25lIiBpZD0icHJvZC1HTU4xNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tU1JDPVtYUDcxSVc5SDU4UnR5bkc3THFlZWpTbjVPMWFMUThZczRuVk5jVEN1RTdGRlRFVUU5VDUyZkg4YTJBYU5ZNDF0clFCUTUzeENERGZaVDRWSmVlWU12eF9kX2pfdnB0NlBOY1NjR2NwSWxtemxFa0QxUnpvelpDNm5mZkZaNGFTazhQUjUxamhhRWdnODBWRjBtOFBnQUVUOFBwUWFUWlZ0TzNNck5EN0FFcG9GM2VhY1A5YmFMVVFYcVpROFVzR1p2Q1dxQk12TWoxRmprdEw5aWFZNlUxNFI1WHYybmRNem4xSllWUnVlcTNPQWdsa0dSTkEyVThzZ3JNUlkzcmcxa0lZYU85Uno0ckdHUEZZd2o4WEZ0THJMX2g5TUk2dW1PSUhOWmx1N20xQUthMWpSbVpBS2RsNGI5SnNyWnRkNlE0VDlPUGFyY0xuUlA0YjNtUlRqQUVBMVp2eEt2bEFZUnBmTDZsOGVyNEthV1NDaTdmYm5hV1hMYWY4U2VGcmZjblFVM2NTZDJyZTMtMWZyN085c18tcnJEQmFRUWE3ZEZFWXkxRXJIcUJnUkhHcEZCanVWZHlGVWpWZXFWa2c2am0tUW9XMkhfbVMwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_17">環境変数管理<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<h4 id="heroku-config-vars">Heroku Config Vars<a class="headerlink" href="#heroku-config-vars" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># 本番環境設定</span>
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">ASPNETCORE_ENVIRONMENT</span><span class="o">=</span>Production
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">SENDGRID_API_KEY</span><span class="o">=</span><span class="s2">&quot;SG.xxx...&quot;</span>
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">ALLOWED_HOSTS</span><span class="o">=</span><span class="s2">&quot;ordertaking-app.herokuapp.com&quot;</span>

<span class="c1"># アプリケーション設定</span>
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">MAX_ORDER_AMOUNT</span><span class="o">=</span><span class="m">10000</span>
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">ORDER_EXPIRY_HOURS</span><span class="o">=</span><span class="m">24</span>

<span class="c1"># InMemory DB を使用するため DATABASE_URL は不要</span>
</code></pre></div>
<h4 id="appsettingsproductionjson">appsettings.Production.json<a class="headerlink" href="#appsettingsproductionjson" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Logging&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;LogLevel&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Information&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;Microsoft.AspNetCore&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Warning&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;AllowedHosts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;Database&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;InMemory&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;DatabaseName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OrderTakingDb&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;Email&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SendGrid&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;FromAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;noreply@ordertaking-app.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;FromName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Order Taking System&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;OrderSettings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;MaxOrderAmount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ExpiryHours&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;MaxOrderLines&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="_18">スケーリング戦略<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<h3 id="_19">水平スケーリング<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<h4 id="_20">オートスケーリング設定<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Heroku CLI によるオートスケーリング設定</span>
heroku<span class="w"> </span>ps:autoscale:enable<span class="w"> </span>web<span class="w"> </span>--min<span class="w"> </span><span class="m">1</span><span class="w"> </span>--max<span class="w"> </span><span class="m">10</span><span class="w"> </span>--p95<span class="w"> </span>750ms

<span class="c1"># 説明:</span>
<span class="c1"># - min: 最小 1 dyno</span>
<span class="c1"># - max: 最大 10 dynos</span>
<span class="c1"># - p95: レスポンスタイム95パーセンタイルが750msを超えたらスケールアップ</span>
</code></pre></div>
<h4 id="_21">スケーリングポリシー<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjQ4NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTM1cHg7aGVpZ2h0OjQ4NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUzNSA0ODYiIHdpZHRoPSI1MzVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxlbGxpcHNlIGN4PSIyNzMuNDM0OCIgY3k9IjIwIiBmaWxsPSIjMjIyMjIyIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMDQuMDAwNiIgeD0iMjIxLjQzNDUiIHk9IjUwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuMDAwNiIgeD0iMjMxLjQzNDUiIHk9IjcxLjEzODciPiYjMTI1MjI7JiMxMjQ2MzsmIzEyNDU2OyYjMTI0NzM7JiMxMjQ4ODsmIzMwNDM1OyYjMzUyMjI7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iNTguMDYwOCwxMDMuOTY4OCwyMzAuMDI2NSwxMDMuOTY4OCwyNDIuMDI2NSwxMTUuOTY4OCwyMzAuMDI2NSwxMjcuOTY4OCw1OC4wNjA4LDEyNy45Njg4LDQ2LjA2MDgsMTE1Ljk2ODgsNTguMDYwOCwxMDMuOTY4OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuMDA4MyIgeD0iMTQ4LjA0MzciIHk9IjEzOC4xNzkyIj55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcxLjk2NTciIHg9IjU4LjA2MDgiIHk9IjExOS43NzY5Ij5wOTUgJiMxMjUyNDsmIzEyNDczOyYjMTI1MDk7JiMxMjUzMTsmIzEyNDczOyYjMTI0Nzk7JiMxMjQ1MjsmIzEyNTEyOyAmZ3Q7IDc1MG1zPzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9Ijg2LjE4MzcsMTU5LjY3OTIsMjAxLjkwMzYsMTU5LjY3OTIsMjEzLjkwMzYsMTcxLjY3OTIsMjAxLjkwMzYsMTgzLjY3OTIsODYuMTgzNywxODMuNjc5Miw3NC4xODM3LDE3MS42NzkyLDg2LjE4MzcsMTU5LjY3OTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNS43MTk5IiB4PSI4Ni4xODM3IiB5PSIxNzUuNDg3MyI+JiMyOTY5NDsmIzIyMzEyOyYjMTIzOTg7IER5bm8gJiMyNTk2ODsgJmx0OyAxMD88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuMDA4MyIgeD0iNTUuMTc1NCIgeT0iMTY5LjA4NSI+eWVzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzLjcwMTciIHg9IjIxMy45MDM2IiB5PSIxNjkuMDg1Ij5ubzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA2LjM2NzUiIHg9IjExIiB5PSIxOTMuNjc5MiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjM2NzUiIHg9IjIxIiB5PSIyMTQuODE3OSI+RHlubyAmIzEyNDM0OyAxICYjMzY4NjE7JiMyMTE1Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijc1LjYzNTEiIHg9IjI2LjM2NjIiIHk9IjI2Mi42NDc5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuNjM1MSIgeD0iMzYuMzY2MiIgeT0iMjgzLjc4NjYiPjUmIzIwOTk4OyYjMzgyOTE7JiMyNDQ1MzsmIzI3MjMxOzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMDAwNSIgeD0iMTc3LjkwMzQiIHk9IjE5My42NzkyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIuMDAwNSIgeD0iMTg3LjkwMzQiIHk9IjIxNC44MTc5Ij4mIzEyNDUwOyYjMTI1MjE7JiMxMjU0MDsmIzEyNDg4OyYjMzY4NjU7JiMyMDQ0OTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIxNDQuMDQzNywzMDIuNjE2NywxNTYuMDQzNywzMTQuNjE2NywxNDQuMDQzNywzMjYuNjE2NywxMzIuMDQzNywzMTQuNjE2NywxNDQuMDQzNywzMDIuNjE2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIzMTEuOTAzOSwxMDMuOTY4OCw0ODMuODY5NiwxMDMuOTY4OCw0OTUuODY5NiwxMTUuOTY4OCw0ODMuODY5NiwxMjcuOTY4OCwzMTEuOTAzOSwxMjcuOTY4OCwyOTkuOTAzOSwxMTUuOTY4OCwzMTEuOTAzOSwxMDMuOTY4OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuMDA4MyIgeD0iNDAxLjg4NjgiIHk9IjEzOC4xNzkyIj55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcxLjk2NTciIHg9IjMxMS45MDM5IiB5PSIxMTkuNzc2OSI+cDk1ICYjMTI1MjQ7JiMxMjQ3MzsmIzEyNTA5OyYjMTI1MzE7JiMxMjQ3MzsmIzEyNDc5OyYjMTI0NTI7JiMxMjUxMjsgJmx0OyAzMDBtcz88L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwNi4zNjc1IiB4PSIzNDQuNzAzIiB5PSIyMDguMDgxNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg2LjM2NzUiIHg9IjM1NC43MDMiIHk9IjIyOS4yMjAyIj5EeW5vICYjMTI0MzQ7IDEgJiMyMTA2NjsmIzI4MTg3OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODMuMjY5OSIgeD0iMzU2LjI1MTgiIHk9IjI3Ny4wNTAzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjMuMjY5OSIgeD0iMzY2LjI1MTgiIHk9IjI5OC4xODkiPjEwJiMyMDk5ODsmIzM4MjkxOyYjMjQ0NTM7JiMyNzIzMTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIzNDMuNTI2MSwxNTkuNjc5Miw0NTIuMjQ3NSwxNTkuNjc5Miw0NjQuMjQ3NSwxNzEuNjc5Miw0NTIuMjQ3NSwxODMuNjc5MiwzNDMuNTI2MSwxODMuNjc5MiwzMzEuNTI2MSwxNzEuNjc5MiwzNDMuNTI2MSwxNTkuNjc5MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuMDA4MyIgeD0iNDAxLjg4NjgiIHk9IjE5My44ODk2Ij55ZXM8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjcyMTQiIHg9IjM0My41MjYxIiB5PSIxNzUuNDg3MyI+JiMyOTY5NDsmIzIyMzEyOyYjMTIzOTg7IER5bm8gJiMyNTk2ODsgJmd0OyAxPzwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjM5Ny44ODY4LDMzNS40MjE0LDQwOS44ODY4LDM0Ny40MjE0LDM5Ny44ODY4LDM1OS40MjE0LDM4NS44ODY4LDM0Ny40MjE0LDM5Ny44ODY4LDMzNS40MjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjguMDAwNCIgeD0iMjM5LjQzNDYiIHk9IjM5OS40MjE0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDguMDAwNCIgeD0iMjQ5LjQzNDYiIHk9IjQyMC41NjAxIj4mIzMyMTUzOyYjMzIxNTQ7JiMzMDQzNTsmIzM1MjIyOzwvdGV4dD48ZWxsaXBzZSBjeD0iMjczLjQzNDgiIGN5PSI0NjQuMzkwMSIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMjczLjQzNDgiIGN5PSI0NjQuMzkwMSIgZmlsbD0iIzIyMjIyMiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI3My40MzQ4IiB4Mj0iMjczLjQzNDgiIHkxPSIzMCIgeTI9IjUwIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNjkuNDM0OCw0MCwyNzMuNDM0OCw1MCwyNzcuNDM0OCw0MCwyNzMuNDM0OCw0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI2NC4xODM3IiB4Mj0iNjQuMTgzNyIgeTE9IjIyNy42NDc5IiB5Mj0iMjYyLjY0NzkiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjYwLjE4MzcsMjUyLjY0NzksNjQuMTgzNywyNjIuNjQ3OSw2OC4xODM3LDI1Mi42NDc5LDY0LjE4MzcsMjU2LjY0NzkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNzQuMTgzNyIgeDI9IjY0LjE4MzciIHkxPSIxNzEuNjc5MiIgeTI9IjE3MS42NzkyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY0LjE4MzciIHgyPSI2NC4xODM3IiB5MT0iMTcxLjY3OTIiIHkyPSIxOTMuNjc5MiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNjAuMTgzNywxODMuNjc5Miw2NC4xODM3LDE5My42NzkyLDY4LjE4MzcsMTgzLjY3OTIsNjQuMTgzNywxODcuNjc5MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMTMuOTAzNiIgeDI9IjIyMy45MDM2IiB5MT0iMTcxLjY3OTIiIHkyPSIxNzEuNjc5MiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyMjMuOTAzNiIgeDI9IjIyMy45MDM2IiB5MT0iMTcxLjY3OTIiIHkyPSIxOTMuNjc5MiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjE5LjkwMzYsMTgzLjY3OTIsMjIzLjkwMzYsMTkzLjY3OTIsMjI3LjkwMzYsMTgzLjY3OTIsMjIzLjkwMzYsMTg3LjY3OTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjQuMTgzNyIgeDI9IjY0LjE4MzciIHkxPSIyOTYuNjE2NyIgeTI9IjMxNC42MTY3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjY0LjE4MzciIHgyPSIxMzIuMDQzNyIgeTE9IjMxNC42MTY3IiB5Mj0iMzE0LjYxNjciLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEyMi4wNDM3LDMxMC42MTY3LDEzMi4wNDM3LDMxNC42MTY3LDEyMi4wNDM3LDMxOC42MTY3LDEyNi4wNDM3LDMxNC42MTY3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMy45MDM2IiB4Mj0iMjIzLjkwMzYiIHkxPSIyMjcuNjQ3OSIgeTI9IjMxNC42MTY3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjIyMy45MDM2IiB4Mj0iMTU2LjA0MzciIHkxPSIzMTQuNjE2NyIgeTI9IjMxNC42MTY3Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNjYuMDQzNywzMTAuNjE2NywxNTYuMDQzNywzMTQuNjE2NywxNjYuMDQzNywzMTguNjE2NywxNjIuMDQzNywzMTQuNjE2NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTcuODg2OCIgeDI9IjM5Ny44ODY4IiB5MT0iMjQyLjA1MDMiIHkyPSIyNzcuMDUwMyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzkzLjg4NjgsMjY3LjA1MDMsMzk3Ljg4NjgsMjc3LjA1MDMsNDAxLjg4NjgsMjY3LjA1MDMsMzk3Ljg4NjgsMjcxLjA1MDMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzk3Ljg4NjgiIHgyPSIzOTcuODg2OCIgeTE9IjE4My42NzkyIiB5Mj0iMjA4LjA4MTUiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM5My44ODY4LDE5OC4wODE1LDM5Ny44ODY4LDIwOC4wODE1LDQwMS44ODY4LDE5OC4wODE1LDM5Ny44ODY4LDIwMi4wODE1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ2NC4yNDc1IiB4Mj0iNDc2LjI0NzUiIHkxPSIxNzEuNjc5MiIgeTI9IjE3MS42NzkyIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0NzIuMjQ3NSwyNDkuNTUwMyw0NzYuMjQ3NSwyNTkuNTUwMyw0ODAuMjQ3NSwyNDkuNTUwMyw0NzYuMjQ3NSwyNTMuNTUwMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NzYuMjQ3NSIgeDI9IjQ3Ni4yNDc1IiB5MT0iMTcxLjY3OTIiIHkyPSIzNDcuNDIxNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSI0NzYuMjQ3NSIgeDI9IjQwOS44ODY4IiB5MT0iMzQ3LjQyMTQiIHkyPSIzNDcuNDIxNCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDE5Ljg4NjgsMzQzLjQyMTQsNDA5Ljg4NjgsMzQ3LjQyMTQsNDE5Ljg4NjgsMzUxLjQyMTQsNDE1Ljg4NjgsMzQ3LjQyMTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzk3Ljg4NjgiIHgyPSIzOTcuODg2OCIgeTE9IjMxMS4wMTkiIHkyPSIzMzUuNDIxNCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzkzLjg4NjgsMzI1LjQyMTQsMzk3Ljg4NjgsMzM1LjQyMTQsNDAxLjg4NjgsMzI1LjQyMTQsMzk3Ljg4NjgsMzI5LjQyMTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTQ0LjA0MzciIHgyPSIxNDQuMDQzNyIgeTE9IjEyNy45Njg4IiB5Mj0iMTU5LjY3OTIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0MC4wNDM3LDE0OS42NzkyLDE0NC4wNDM3LDE1OS42NzkyLDE0OC4wNDM3LDE0OS42NzkyLDE0NC4wNDM3LDE1My42NzkyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE0NC4wNDM3IiB4Mj0iMTQ0LjA0MzciIHkxPSIzMjYuNjE2NyIgeTI9IjM3OS40MjE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDAuMDQzNywzNjkuNDIxNCwxNDQuMDQzNywzNzkuNDIxNCwxNDguMDQzNywzNjkuNDIxNCwxNDQuMDQzNywzNzMuNDIxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIzOTcuODg2OCIgeDI9IjM5Ny44ODY4IiB5MT0iMTI3Ljk2ODgiIHkyPSIxNTkuNjc5MiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzkzLjg4NjgsMTQ5LjY3OTIsMzk3Ljg4NjgsMTU5LjY3OTIsNDAxLjg4NjgsMTQ5LjY3OTIsMzk3Ljg4NjgsMTUzLjY3OTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMzk3Ljg4NjgiIHgyPSIzOTcuODg2OCIgeTE9IjM1OS40MjE0IiB5Mj0iMzc5LjQyMTQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM5My44ODY4LDM2OS40MjE0LDM5Ny44ODY4LDM3OS40MjE0LDQwMS44ODY4LDM2OS40MjE0LDM5Ny44ODY4LDM3My40MjE0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjI0Mi4wMjY1IiB4Mj0iMjk5LjkwMzkiIHkxPSIxMTUuOTY4OCIgeTI9IjExNS45Njg4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyODkuOTAzOSwxMTEuOTY4OCwyOTkuOTAzOSwxMTUuOTY4OCwyODkuOTAzOSwxMTkuOTY4OCwyOTMuOTAzOSwxMTUuOTY4OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzMuNDM0OCIgeDI9IjI3My40MzQ4IiB5MT0iODMuOTY4OCIgeTI9Ijg4Ljk2ODgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjczLjQzNDgiIHgyPSIxNDQuMDQzNyIgeTE9Ijg4Ljk2ODgiIHkyPSI4OC45Njg4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE0NC4wNDM3IiB4Mj0iMTQ0LjA0MzciIHkxPSI4OC45Njg4IiB5Mj0iMTAzLjk2ODgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0MC4wNDM3LDkzLjk2ODgsMTQ0LjA0MzcsMTAzLjk2ODgsMTQ4LjA0MzcsOTMuOTY4OCwxNDQuMDQzNyw5Ny45Njg4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ5NS44Njk2IiB4Mj0iNTA5Ljg2OTYiIHkxPSIxMTUuOTY4OCIgeTI9IjExNS45Njg4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjUwOS44Njk2IiB4Mj0iNTA5Ljg2OTYiIHkxPSIxMTUuOTY4OCIgeTI9IjM3OS40MjE0Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1MDUuODY5NiwzNjkuNDIxNCw1MDkuODY5NiwzNzkuNDIxNCw1MTMuODY5NiwzNjkuNDIxNCw1MDkuODY5NiwzNzMuNDIxNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNDQuMDQzNyIgeDI9IjUwOS44Njk2IiB5MT0iMzc5LjQyMTQiIHkyPSIzNzkuNDIxNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzMuNDM0OCIgeDI9IjI3My40MzQ4IiB5MT0iMzc5LjQyMTQiIHkyPSIzOTkuNDIxNCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjY5LjQzNDgsMzg5LjQyMTQsMjczLjQzNDgsMzk5LjQyMTQsMjc3LjQzNDgsMzg5LjQyMTQsMjczLjQzNDgsMzkzLjQyMTQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjczLjQzNDgiIHgyPSIyNzMuNDM0OCIgeTE9IjQzMy4zOTAxIiB5Mj0iNDUzLjM5MDEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI2OS40MzQ4LDQ0My4zOTAxLDI3My40MzQ4LDQ1My4zOTAxLDI3Ny40MzQ4LDQ0My4zOTAxLDI3My40MzQ4LDQ0Ny4zOTAxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PCEtLVNSQz1bQW92OUIyaFh1aDl3dEJwZ1NURnducXFoN1pWalZEcFN5TnBzdVhWQmZiYnBTTU1jQU1XS005ZWdGNnZVMHZRUC14WHZDdVpIakZ6bnF2QjdwR2lLeDFKQ0pHcm9ZLXFyNUtlb0tsQ0tEMmZKWXBOMWtmeHR4dGl3UHlOWm5kS0FCZkx2LUdoRmZjdkdpNTRtRDQxTFEwTU1Vem1xSVM1R3VTTi1sSy14NWJYcE1QYS14TVh4RU10b3F0c2pwclJFai1QQXBJYkVMVDM4b21VZ1Zqb3F3Nzdwb2lWRFV1MUVWRGRHLTZKX0dnMXFOYWZjNmFHSEdTVlFBMVdSNEVqT0VtTDN0NnZ6c2pkclJDVGllNWlEM1QwUzJ0NERjRUlvVWh2anZsRGppLTIxTUxvSU5tMDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="dyno_1">垂直スケーリング（Dyno タイプ変更）<a class="headerlink" href="#dyno_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Dyno Type</th>
<th>RAM</th>
<th>用途</th>
<th>月額コスト</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hobby</strong></td>
<td>512MB</td>
<td>開発・テスト</td>
<td>$7</td>
</tr>
<tr>
<td><strong>Standard-1X</strong></td>
<td>512MB</td>
<td>小規模本番</td>
<td>$25</td>
</tr>
<tr>
<td><strong>Standard-2X</strong></td>
<td>1GB</td>
<td>中規模本番</td>
<td>$50</td>
</tr>
<tr>
<td><strong>Performance-M</strong></td>
<td>2.5GB</td>
<td>大規模本番</td>
<td>$250</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="c1"># Dyno タイプ変更</span>
heroku<span class="w"> </span>ps:type<span class="w"> </span><span class="nv">web</span><span class="o">=</span>standard-2x
</code></pre></div>
<h2 id="_22">データ永続化戦略<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<h3 id="inmemory-database_2">InMemory Database の制約<a class="headerlink" href="#inmemory-database_2" title="Permanent link">&para;</a></h3>
<p>InMemory Database を使用するため、以下の制約があります：</p>
<table>
<thead>
<tr>
<th>制約項目</th>
<th>説明</th>
<th>影響</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>データ永続性</strong></td>
<td>Dyno 再起動で全データ消失</td>
<td>本番データが失われる</td>
</tr>
<tr>
<td><strong>スケーリング</strong></td>
<td>各 Dyno が独立したメモリ空間</td>
<td>データ不整合が発生</td>
</tr>
<tr>
<td><strong>バックアップ</strong></td>
<td>従来型バックアップ不可</td>
<td>障害復旧が困難</td>
</tr>
</tbody>
</table>
<h3 id="_23">データ永続化オプション（代替案）<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>InMemory DB の制約を補うための代替手段：</p>
<h4 id="1">1. イベントソーシングパターン<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="nn">EventStore</span><span class="w"> </span><span class="o">=</span>

<span class="w">    </span><span class="c1">// ドメインイベントを外部ストレージに保存</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">saveEvent</span><span class="w"> </span><span class="o">(</span><span class="k">event</span><span class="o">:</span><span class="w"> </span><span class="n">DomainEvent</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// オプション A: ファイルシステム（Dyno の一時領域）</span>
<span class="w">        </span><span class="c1">// オプション B: 外部ストレージ（AWS S3、Azure Blob Storage）</span>
<span class="w">        </span><span class="c1">// オプション C: 外部イベントストア（EventStoreDB、Kafka）</span>

<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">eventJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">JsonSerializer</span><span class="p">.</span><span class="n">Serialize</span><span class="o">(</span><span class="k">event</span><span class="o">)</span>
<span class="w">        </span><span class="c1">// 外部ストレージへ保存</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">()</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="c1">// イベントから状態を再構築</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">replayEvents</span><span class="w"> </span><span class="o">(</span><span class="n">aggregateId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// 保存されたイベントを読み込み</span>
<span class="w">        </span><span class="c1">// 状態を再構築</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">()</span>
<span class="w">    </span><span class="o">}</span>
</code></pre></div>
<h4 id="2">2. 定期スナップショット<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="nn">SnapshotService</span><span class="w"> </span><span class="o">=</span>

<span class="w">    </span><span class="c1">// 定期的にメモリ内データを外部保存</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">createSnapshot</span><span class="w"> </span><span class="o">(</span><span class="n">dbContext</span><span class="o">:</span><span class="w"> </span><span class="n">OrderContext</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="k">let!</span><span class="w"> </span><span class="nv">orders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbContext</span><span class="o">.</span><span class="n">Orders</span><span class="o">.</span><span class="n">ToListAsync</span><span class="bp">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Async</span><span class="p">.</span><span class="n">AwaitTask</span>
<span class="w">        </span><span class="k">let!</span><span class="w"> </span><span class="nv">orderLines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbContext</span><span class="o">.</span><span class="n">OrderLines</span><span class="o">.</span><span class="n">ToListAsync</span><span class="bp">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Async</span><span class="p">.</span><span class="n">AwaitTask</span>
<span class="w">        </span><span class="k">let!</span><span class="w"> </span><span class="nv">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbContext</span><span class="o">.</span><span class="n">Products</span><span class="o">.</span><span class="n">ToListAsync</span><span class="bp">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Async</span><span class="p">.</span><span class="n">AwaitTask</span>

<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">snapshot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{|</span>
<span class="w">            </span><span class="n">Timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DateTime</span><span class="p">.</span><span class="n">UtcNow</span>
<span class="w">            </span><span class="n">Orders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orders</span>
<span class="w">            </span><span class="n">OrderLines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orderLines</span>
<span class="w">            </span><span class="n">Products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">products</span>
<span class="w">        </span><span class="o">|}</span>

<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">JsonSerializer</span><span class="p">.</span><span class="n">Serialize</span><span class="o">(</span><span class="n">snapshot</span><span class="o">)</span>
<span class="w">        </span><span class="c1">// 外部ストレージへ保存（S3、Azure Blob など）</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">()</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="c1">// スナップショットから復元</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">restoreSnapshot</span><span class="w"> </span><span class="o">(</span><span class="n">dbContext</span><span class="o">:</span><span class="w"> </span><span class="n">OrderContext</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// 外部ストレージから読み込み</span>
<span class="w">        </span><span class="c1">// InMemory DB へロード</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">()</span>
<span class="w">    </span><span class="o">}</span>
</code></pre></div>
<h4 id="3-heroku-scheduler_1">3. Heroku Scheduler による定期保存<a class="headerlink" href="#3-heroku-scheduler_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># 毎時スナップショット作成</span>
<span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>create-snapshot

<span class="c1"># Dyno 起動時にスナップショット復元</span>
<span class="c1"># Procfile</span>
web:<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>restore-snapshot<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.WebApi.dll<span class="w"> </span>--urls<span class="w"> </span>http://0.0.0.0:<span class="nv">$PORT</span>
</code></pre></div>
<h3 id="_24">データ監視<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="nn">DatabaseMonitoring</span><span class="w"> </span><span class="o">=</span>

<span class="w">    </span><span class="c1">// メモリ使用量監視</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">monitorMemoryUsage</span><span class="w"> </span><span class="o">(</span><span class="n">dbContext</span><span class="o">:</span><span class="w"> </span><span class="n">OrderContext</span><span class="o">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">orderCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbContext</span><span class="o">.</span><span class="n">Orders</span><span class="o">.</span><span class="n">Count</span><span class="bp">()</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">orderLineCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbContext</span><span class="o">.</span><span class="n">OrderLines</span><span class="o">.</span><span class="n">Count</span><span class="bp">()</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">productCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dbContext</span><span class="o">.</span><span class="n">Products</span><span class="o">.</span><span class="n">Count</span><span class="bp">()</span>

<span class="w">        </span><span class="c1">// メトリクスをログ出力</span>
<span class="w">        </span><span class="nn">Log</span><span class="p">.</span><span class="n">Information</span><span class="o">(</span><span class="s">&quot;InMemory DB Status: Orders={OrderCount}, OrderLines={OrderLineCount}, Products={ProductCount}&quot;</span><span class="o">,</span>
<span class="w">            </span><span class="n">orderCount</span><span class="o">,</span><span class="w"> </span><span class="n">orderLineCount</span><span class="o">,</span><span class="w"> </span><span class="n">productCount</span><span class="o">)</span>

<span class="w">    </span><span class="c1">// データロード状態監視</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">monitorDataLoadStatus</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="c1">// アプリケーション起動時にデータがロードされているか確認</span>
<span class="w">        </span><span class="c1">// Papertrail にログ送信</span>
<span class="w">        </span><span class="bp">()</span>
</code></pre></div>
<h2 id="_25">セキュリティ設計<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<h3 id="httpstls">HTTPS/TLS<a class="headerlink" href="#httpstls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Heroku は自動的に SSL/TLS 証明書を提供</span>
<span class="c1"># Custom domain の場合</span>
heroku<span class="w"> </span>certs:auto:enable
</code></pre></div>
<h3 id="_26">環境変数の暗号化<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 機密情報は Config Vars で管理（暗号化済み）</span>
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">DATABASE_URL</span><span class="o">=</span><span class="s2">&quot;...&quot;</span>
heroku<span class="w"> </span>config:set<span class="w"> </span><span class="nv">SENDGRID_API_KEY</span><span class="o">=</span><span class="s2">&quot;...&quot;</span>

<span class="c1"># アプリケーションコードには直接記述しない</span>
</code></pre></div>
<h3 id="_27">アプリケーションレベルセキュリティ<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// ASP.NET Core セキュリティ設定</span>
<span class="k">module</span><span class="w"> </span><span class="nn">SecurityConfiguration</span><span class="w"> </span><span class="o">=</span>

<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">configureServices</span><span class="w"> </span><span class="o">(</span><span class="n">services</span><span class="o">:</span><span class="w"> </span><span class="n">IServiceCollection</span><span class="o">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">services</span>
<span class="w">            </span><span class="o">.</span><span class="n">AddCors</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">options</span><span class="o">.</span><span class="n">AddPolicy</span><span class="o">(</span><span class="s">&quot;AllowedOrigins&quot;</span><span class="o">,</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                    </span><span class="n">builder</span>
<span class="w">                        </span><span class="o">.</span><span class="n">WithOrigins</span><span class="o">(</span><span class="n">getAllowedOrigins</span><span class="bp">()</span><span class="o">)</span>
<span class="w">                        </span><span class="o">.</span><span class="n">AllowAnyMethod</span><span class="bp">()</span>
<span class="w">                        </span><span class="o">.</span><span class="n">AllowAnyHeader</span><span class="bp">()</span>
<span class="w">                    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>
<span class="w">                </span><span class="o">)</span>
<span class="w">            </span><span class="o">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">AddHsts</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="n">options</span><span class="o">.</span><span class="n">MaxAge</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nn">TimeSpan</span><span class="p">.</span><span class="n">FromDays</span><span class="o">(</span><span class="mi">365</span><span class="o">.</span><span class="mi">0</span><span class="o">)</span>
<span class="w">                </span><span class="n">options</span><span class="o">.</span><span class="n">IncludeSubDomains</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">true</span>
<span class="w">                </span><span class="n">options</span><span class="o">.</span><span class="n">Preload</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">true</span>
<span class="w">            </span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">ignore</span>
</code></pre></div>
<h2 id="_28">監視とアラート<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h2>
<h3 id="papertrail">Papertrail アラート設定<a class="headerlink" href="#papertrail" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjIzMXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODIwcHg7aGVpZ2h0OjIzMXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDgyMCAyMzEiIHdpZHRoPSI4MjBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFBhcGVydHJhaWwgU2VhcmNoLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJQYXBlcnRyYWlsIFNlYXJjaCIgZGF0YS1zb3VyY2UtbGluZT0iMSIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX1BhcGVydHJhaWwgU2VhcmNoIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9Ijk3LjI5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNzczIiB4PSI3IiB5PSI3Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1IiB4PSI3NjAiIHk9IjEyIi8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iNzU4IiB5PSIxNCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9Ijc1OCIgeT0iMTgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM3LjgzOTgiIHg9IjMyNC41ODAxIiB5PSIzMi45OTUxIj5QYXBlcnRyYWlsIFNlYXJjaDwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgQWxlcnQgQ2hhbm5lbHMtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IkFsZXJ0IENoYW5uZWxzIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImNsdXN0ZXJfQWxlcnQgQ2hhbm5lbHMiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iOTcuMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYwMSIgeD0iMjEzIiB5PSIxMjguMjkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTUiIHg9Ijc5NCIgeT0iMTMzLjI5Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iNzkyIiB5PSIxMzUuMjkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0IiB4PSI3OTIiIHk9IjEzOS4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTUuODQ4NiIgeD0iNDU1LjU3NTciIHk9IjE1NC4yODUxIj5BbGVydCBDaGFubmVsczwvdGV4dD48L2c+PCEtLWVudGl0eSBFcnJvciBMZXZlbCBMb2dzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkVycm9yIExldmVsIExvZ3MiIGRhdGEtc291cmNlLWxpbmU9IjIiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X0Vycm9yIExldmVsIExvZ3MiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUzLjMyNjIiIHg9IjIzLjM0IiB5PSI0MiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIxNTYuNjY2MiIgeT0iNDciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE1NC42NjYyIiB5PSI0OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTU0LjY2NjIiIHk9IjUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjMyNjIiIHg9IjM4LjM0IiB5PSI3NC45OTUxIj5FcnJvciBMZXZlbCBMb2dzPC90ZXh0PjwvZz48IS0tZW50aXR5IERhdGFiYXNlIEVycm9ycy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJEYXRhYmFzZSBFcnJvcnMiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X0RhdGFiYXNlIEVycm9ycyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNTMuMjIzNiIgeD0iNDMxLjM5IiB5PSI0MiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSI1NjQuNjEzNiIgeT0iNDciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjU2Mi42MTM2IiB5PSI0OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNTYyLjYxMzYiIHk9IjUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEzLjIyMzYiIHg9IjQ0Ni4zOSIgeT0iNzQuOTk1MSI+RGF0YWJhc2UgRXJyb3JzPC90ZXh0PjwvZz48IS0tZW50aXR5IFJlc3BvbnNlIFRpbWUgPiAycy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJSZXNwb25zZSBUaW1lIC4gMnMiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X1Jlc3BvbnNlIFRpbWUgLiAycyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODMuODQxOCIgeD0iMjEyLjA4IiB5PSI0MiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIzNzUuOTIxOCIgeT0iNDciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjM3My45MjE4IiB5PSI0OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMzczLjkyMTgiIHk9IjUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzLjg0MTgiIHg9IjIyNy4wOCIgeT0iNzQuOTk1MSI+UmVzcG9uc2UgVGltZSAmZ3Q7IDJzPC90ZXh0PjwvZz48IS0tZW50aXR5IDR4eC81eHggU3RhdHVzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IjR4eC41eHggU3RhdHVzIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV80eHguNXh4IFN0YXR1cyI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNDQuNzMzNCIgeD0iNjE5LjYzIiB5PSI0MiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSI3NDQuMzYzNCIgeT0iNDciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9Ijc0Mi4zNjM0IiB5PSI0OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNzQyLjM2MzQiIHk9IjUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjczMzQiIHg9IjYzNC42MyIgeT0iNzQuOTk1MSI+NHh4LzV4eCBTdGF0dXM8L3RleHQ+PC9nPjwhLS1lbnRpdHkgRW1haWwgTm90aWZpY2F0aW9uLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkVtYWlsIE5vdGlmaWNhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfRW1haWwgTm90aWZpY2F0aW9uIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE2My42MjExIiB4PSIyMjkuMTkiIHk9IjE2My4yOSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSIzNzIuODExMSIgeT0iMTY4LjI5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzNzAuODExMSIgeT0iMTcwLjI5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIzNzAuODExMSIgeT0iMTc0LjI5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIzLjYyMTEiIHg9IjI0NC4xOSIgeT0iMTk2LjI4NTEiPkVtYWlsIE5vdGlmaWNhdGlvbjwvdGV4dD48L2c+PCEtLWVudGl0eSBTbGFjayBXZWJob29rLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlNsYWNrIFdlYmhvb2siIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9TbGFjayBXZWJob29rIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE0Ny4wNjQ1IiB4PSI0MjcuNDciIHk9IjE2My4yOSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSI1NTQuNTM0NSIgeT0iMTY4LjI5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSI1NTIuNTM0NSIgeT0iMTcwLjI5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSI1NTIuNTM0NSIgeT0iMTc0LjI5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA3LjA2NDUiIHg9IjQ0Mi40NyIgeT0iMTk2LjI4NTEiPlNsYWNrIFdlYmhvb2s8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUGFnZXJEdXR5IChPcHRpb25hbCktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUGFnZXJEdXR5IC5PcHRpb25hbC4iIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAxMCIgaWQ9ImVudGl0eV9QYWdlckR1dHkgLk9wdGlvbmFsLiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODguMjcxNSIgeD0iNjA5Ljg2IiB5PSIxNjMuMjkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iNzc4LjEzMTUiIHk9IjE2OC4yOSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNzc2LjEzMTUiIHk9IjE3MC4yOSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNzc2LjEzMTUiIHk9IjE3NC4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0OC4yNzE1IiB4PSI2MjQuODYiIHk9IjE5Ni4yODUxIj5QYWdlckR1dHkgKE9wdGlvbmFsKTwvdGV4dD48L2c+PCEtLWxpbmsgRXJyb3IgTGV2ZWwgTG9ncyB0byBFbWFpbCBOb3RpZmljYXRpb24tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRXJyb3IgTGV2ZWwgTG9ncyIgZGF0YS1lbnRpdHktMj0iRW1haWwgTm90aWZpY2F0aW9uIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgZGF0YS11aWQ9ImxuazExIiBpZD0ibGlua19FcnJvciBMZXZlbCBMb2dzX0VtYWlsIE5vdGlmaWNhdGlvbiI+PHBhdGggZD0iTTEzOS42OSw4OC41OCBDMTc3LjI5LDEwOS44NCAyMjguMjQ2OSwxMzguNjU3MiAyNjUuOTA2OSwxNTkuOTQ3MiIgZmlsbD0ibm9uZSIgaWQ9IkVycm9yIExldmVsIExvZ3MtdG8tRW1haWwgTm90aWZpY2F0aW9uIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNzEuMTMsMTYyLjksMjY1LjI2MzgsMTU0Ljk4ODgsMjY2Ljc3NzQsMTYwLjQzOTQsMjYxLjMyNjgsMTYxLjk1MywyNzEuMTMsMTYyLjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgRGF0YWJhc2UgRXJyb3JzIHRvIFNsYWNrIFdlYmhvb2stLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRGF0YWJhc2UgRXJyb3JzIiBkYXRhLWVudGl0eS0yPSJTbGFjayBXZWJob29rIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua19EYXRhYmFzZSBFcnJvcnNfU2xhY2sgV2ViaG9vayI+PHBhdGggZD0iTTUwNi42OCw4OC41OCBDNTA1LjQzLDEwOS45MSA1MDMuOTExNywxMzUuODIwMyA1MDIuNjYxNywxNTcuMTEwMyIgZmlsbD0ibm9uZSIgaWQ9IkRhdGFiYXNlIEVycm9ycy10by1TbGFjayBXZWJob29rIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1MDIuMzEsMTYzLjEsNTA2LjgzMDYsMTU0LjM0OTksNTAyLjYwMzEsMTU4LjEwODYsNDk4Ljg0NDQsMTUzLjg4MSw1MDIuMzEsMTYzLjEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgUmVzcG9uc2UgVGltZSA+IDJzIHRvIEVtYWlsIE5vdGlmaWNhdGlvbi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJSZXNwb25zZSBUaW1lIC4gMnMiIGRhdGEtZW50aXR5LTI9IkVtYWlsIE5vdGlmaWNhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJsbmsxMyIgaWQ9ImxpbmtfUmVzcG9uc2UgVGltZSAuIDJzX0VtYWlsIE5vdGlmaWNhdGlvbiI+PHBhdGggZD0iTTMwNS4zMiw4OC41OCBDMzA2LjU3LDEwOS45MSAzMDguMDg4MywxMzUuODIwMyAzMDkuMzM4MywxNTcuMTEwMyIgZmlsbD0ibm9uZSIgaWQ9IlJlc3BvbnNlIFRpbWUgJmd0OyAycy10by1FbWFpbCBOb3RpZmljYXRpb24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMwOS42OSwxNjMuMSwzMTMuMTU1NiwxNTMuODgxLDMwOS4zOTY5LDE1OC4xMDg2LDMwNS4xNjk0LDE1NC4zNDk5LDMwOS42OSwxNjMuMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayA0eHgvNXh4IFN0YXR1cyB0byBTbGFjayBXZWJob29rLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9IjR4eC41eHggU3RhdHVzIiBkYXRhLWVudGl0eS0yPSJTbGFjayBXZWJob29rIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImxuazE0IiBpZD0ibGlua180eHguNXh4IFN0YXR1c19TbGFjayBXZWJob29rIj48cGF0aCBkPSJNNjQ3LjUxLDg4LjcgQzYyOS45NCw5OC4wMSA2MDkuNzQsMTA5LjIgNTkyLDEyMC4yOSBDNTcwLjc1LDEzMy41OCA1NTIuNjI0MSwxNDYuNDM4OSA1MzUuMDk0MSwxNTkuNDc4OSIgZmlsbD0ibm9uZSIgaWQ9IjR4eC81eHggU3RhdHVzLXRvLVNsYWNrIFdlYmhvb2siIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUzMC4yOCwxNjMuMDYsNTM5Ljg4ODYsMTYwLjg5NzgsNTM0LjI5MTgsMTYwLjA3NTgsNTM1LjExMzgsMTU0LjQ3OSw1MzAuMjgsMTYzLjA2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1TUkM9W1ZPXzEyZTkwNDhSbEZpTldnR3VJSDVzNW82dklhYTQ3d0owa2Fvd2treEF4WFg2elV3aVUwZkVFeXlfbVZWQ3BMSlRBYWhKVzl6WUdqWGd2VzlIR2l6QTdidlNUajVPUU9kZ0dXNVdMdmtQYjRMaENxSDBDa3B1dmF0NEticm51SkgzMmtXeXROUlZRVFhzYTVjdGhXaFZkaVF6ajl2bUN6WUxBSVNBQ2doZnQ3dk5iVHl4R1NZS1Q5SE44QWhYSU5ZZkxrSmQxV2RKS3NZU2lKYXJfV3M4dmk3eV9YSTA4T1B1d2hKMlVKYnFwalZ1bTl0dGRhMXkwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_29">メトリクス監視<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Heroku メトリクス確認</span>
heroku<span class="w"> </span>metrics<span class="w"> </span>--app<span class="w"> </span>ordertaking-app

<span class="c1"># ダッシュボード</span>
https://dashboard.heroku.com/apps/ordertaking-app/metrics/web
</code></pre></div>
<h2 id="_30">コスト見積もり<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h2>
<h3 id="_31">月額コスト試算<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>リソース</th>
<th>プラン</th>
<th>数量</th>
<th>月額コスト</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Web Dyno</strong></td>
<td>Standard-1X</td>
<td>1</td>
<td>$25</td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>InMemory (組み込み)</td>
<td>-</td>
<td>$0</td>
</tr>
<tr>
<td><strong>Papertrail</strong></td>
<td>Choklad</td>
<td>1</td>
<td>$0</td>
</tr>
<tr>
<td><strong>SendGrid</strong></td>
<td>Starter</td>
<td>1</td>
<td>$0</td>
</tr>
<tr>
<td><strong>Scheduler</strong></td>
<td>Standard</td>
<td>1</td>
<td>$0</td>
</tr>
<tr>
<td><strong>合計</strong></td>
<td>-</td>
<td>-</td>
<td><strong>$25/月</strong></td>
</tr>
</tbody>
</table>
<h3 id="_32">スケール時のコスト<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>構成</th>
<th>Dyno数</th>
<th>月額コスト</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>最小構成</strong></td>
<td>1</td>
<td>$25</td>
</tr>
<tr>
<td><strong>中規模</strong></td>
<td>3</td>
<td>$75</td>
</tr>
<tr>
<td><strong>大規模</strong></td>
<td>10</td>
<td>$250</td>
</tr>
</tbody>
</table>
<p><strong>注意</strong>: InMemory DB を使用するため、データベースコストは不要です。PostgreSQL を使用する場合と比較して月額 $50 のコスト削減になります。</p>
<h2 id="_33">ディザスタリカバリ<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h2>
<h3 id="rporto">RPO/RTO 目標<a class="headerlink" href="#rporto" title="Permanent link">&para;</a></h3>
<p>InMemory DB の特性上、従来型のバックアップ・リストアは適用できません。</p>
<table>
<thead>
<tr>
<th>指標</th>
<th>目標値</th>
<th>実現方法</th>
<th>制約</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>RPO</strong></td>
<td>N/A</td>
<td>データ永続化なし</td>
<td>Dyno 再起動で全データ消失</td>
</tr>
<tr>
<td><strong>RTO</strong></td>
<td>5分</td>
<td>Dyno 再起動のみ</td>
<td>データは失われる</td>
</tr>
</tbody>
</table>
<h3 id="inmemory-db">InMemory DB 環境でのリカバリ手順<a class="headerlink" href="#inmemory-db" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Dyno の状態確認</span>
heroku<span class="w"> </span>ps<span class="w"> </span>--app<span class="w"> </span>ordertaking-app

<span class="c1"># 2. アプリケーション再起動</span>
heroku<span class="w"> </span>restart<span class="w"> </span>--app<span class="w"> </span>ordertaking-app

<span class="c1"># 3. ヘルスチェック</span>
curl<span class="w"> </span>https://ordertaking-app.herokuapp.com/health

<span class="c1"># 4. データ初期化（必要に応じて）</span>
<span class="c1"># 初期マスタデータを再投入</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://ordertaking-app.herokuapp.com/admin/seed-data
</code></pre></div>
<h3 id="_34">データ損失への対応策<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h3>
<p>InMemory DB 使用時のデータ損失を最小化する方法：</p>
<h4 id="1_1">オプション 1: スナップショット復元<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># 外部ストレージから最新スナップショットを復元</span>
heroku<span class="w"> </span>run<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>restore-snapshot<span class="w"> </span>--app<span class="w"> </span>ordertaking-app
</code></pre></div>
<h4 id="2_1">オプション 2: イベント再生<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># イベントストアから状態を再構築</span>
heroku<span class="w"> </span>run<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>replay-events<span class="w"> </span>--app<span class="w"> </span>ordertaking-app
</code></pre></div>
<h4 id="3">オプション 3: マスタデータ再投入<a class="headerlink" href="#3" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># 初期マスタデータのみ再投入（Products など）</span>
heroku<span class="w"> </span>run<span class="w"> </span>dotnet<span class="w"> </span>OrderTaking.Worker.dll<span class="w"> </span>seed-master-data<span class="w"> </span>--app<span class="w"> </span>ordertaking-app
</code></pre></div>
<h2 id="_35">デプロイメント戦略<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h2>
<h3 id="heroku-pipelines">ブルーグリーンデプロイメント（Heroku Pipelines）<a class="headerlink" href="#heroku-pipelines" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI3MHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTkwcHg7aGVpZ2h0OjI3MHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk5MCAyNzAiIHdpZHRoPSI5OTBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIEhlcm9rdSBQaXBlbGluZS0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iSGVyb2t1IFBpcGVsaW5lIiBkYXRhLXNvdXJjZS1saW5lPSIxIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfSGVyb2t1IFBpcGVsaW5lIj48cGF0aCBkPSJNOC41LDQ4LjE1IEwxMzUuMDIxNSw0OC4xNSBBMy43NSwzLjc1IDAgMCAxIDEzNy41MjE1LDUwLjY1IEwxNDQuNTIxNSw3MC40NDY5IEw3NTUuNSw3MC40NDY5IEEyLjUsMi41IDAgMCAxIDc1OCw3Mi45NDY5IEw3NTgsMjYwLjk1IEEyLjUsMi41IDAgMCAxIDc1NS41LDI2My40NSBMOC41LDI2My40NSBBMi41LDIuNSAwIDAgMSA2LDI2MC45NSBMNiw1MC42NSBBMi41LDIuNSAwIDAgMSA4LjUsNDguMTUiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgeDE9IjYiIHgyPSIxNDQuNTIxNSIgeTE9IjcwLjQ0NjkiIHkyPSI3MC40NDY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS41MjE1IiB4PSIxMCIgeT0iNjMuMTQ1MSI+SGVyb2t1IFBpcGVsaW5lPC90ZXh0PjwvZz48IS0tY2x1c3RlciBkZXYtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9ImRldiIgZGF0YS1zb3VyY2UtbGluZT0iMiIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJjbHVzdGVyX2RldiI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMzIuMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE5NyIgeD0iMzgiIHk9Ijk5LjE1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1IiB4PSIyMTUiIHk9IjEwNC4xNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9IjIxMyIgeT0iMTA2LjE1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iMjEzIiB5PSIxMTAuMTUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjkxOCIgeD0iODQuMDQxIiB5PSIxMjUuMTQ1MSI+RGV2ZWxvcG1lbnQ8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHN0YWdpbmctLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9InN0YWdpbmciIGRhdGEtc291cmNlLWxpbmU9IjYiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iY2x1c3Rlcl9zdGFnaW5nIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEzMi4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTkxIiB4PSIyNzUiIHk9Ijk5LjE1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1IiB4PSI0NDYiIHk9IjEwNC4xNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQiIHg9IjQ0NCIgeT0iMTA2LjE1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iNDQ0IiB5PSIxMTAuMTUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuMDMxMyIgeD0iMzM5Ljk4NDQiIHk9IjEyNS4xNDUxIj5TdGFnaW5nPC90ZXh0PjwvZz48IS0tY2x1c3RlciBwcm9kLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJwcm9kIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJjbHVzdGVyX3Byb2QiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMTMyLjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMjAiIHg9IjUwNiIgeT0iOTkuMTUiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTUiIHg9IjcwNiIgeT0iMTA0LjE1Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNCIgeD0iNzA0IiB5PSIxMDYuMTUiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI0IiB4PSI3MDQiIHk9IjExMC4xNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ni4xNDY1IiB4PSI1NzIuOTI2OCIgeT0iMTI1LjE0NTEiPlByb2R1Y3Rpb248L3RleHQ+PC9nPjwhLS1lbnRpdHkgUmV2aWV3IEFwcHMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iUmV2aWV3IEFwcHMiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X1JldmlldyBBcHBzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyOS42NzM4IiB4PSI2Mi4xNiIgeT0iMTYxLjE1Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjE3MS44MzM4IiB5PSIxNjYuMTUiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE2OS44MzM4IiB5PSIxNjguMTUiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjE2OS44MzM4IiB5PSIxNzIuMTUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4OS42NzM4IiB4PSI3Ny4xNiIgeT0iMTk0LjE0NTEiPlJldmlldyBBcHBzPC90ZXh0PjwvZz48IS0tZW50aXR5IHN0YWdpbmctYXBwLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InN0YWdpbmctYXBwIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9zdGFnaW5nLWFwcCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjMuMzAyNyIgeD0iMjk5LjM1IiB5PSIxNjEuMTUiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iNDAyLjY1MjciIHk9IjE2Ni4xNSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNDAwLjY1MjciIHk9IjE2OC4xNSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNDAwLjY1MjciIHk9IjE3Mi4xNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjMwMjciIHg9IjMxNC4zNSIgeT0iMTk0LjE0NTEiPnN0YWdpbmctYXBwPC90ZXh0PjwvZz48IS0tZW50aXR5IG9yZGVydGFraW5nLWFwcC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJvcmRlcnRha2luZy1hcHAiIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImVudGl0eV9vcmRlcnRha2luZy1hcHAiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUyLjgwNjYiIHg9IjUyOS42IiB5PSIxNjEuMTUiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iNjYyLjQwNjYiIHk9IjE2Ni4xNSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNjYwLjQwNjYiIHk9IjE2OC4xNSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNjYwLjQwNjYiIHk9IjE3Mi4xNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMi44MDY2IiB4PSI1NDQuNiIgeT0iMTk0LjE0NTEiPm9yZGVydGFraW5nLWFwcDwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIxOSIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfR01OMTEiPjxwYXRoIGQ9Ik03NzQuMDEsMTY0LjE3IEw3NzQuMDEsMjA0LjQzNTYgTDk4My45OTI2LDIwNC40MzU2IEw5ODMuOTkyNiwxNzQuMTcgTDk3My45OTI2LDE2NC4xNyBMNzc0LjAxLDE2NC4xNyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTk3My45OTI2LDE2NC4xNyBMOTczLjk5MjYsMTc0LjE3IEw5ODMuOTkyNiwxNzQuMTcgTDk3My45OTI2LDE2NC4xNyIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4OC45ODI2IiB4PSI3ODAuMDEiIHk9IjE4MS4yMzY5Ij5Qcm9tb3RlICYjMTIzOTU7JiMxMjQyNDsmIzEyNDI2OyYjMjEzNjM7JiMyNDIzMTsmIzEyMzk1OyYjMjA5OTk7JiMxMjQyNjsmIzI2MzY3OyYjMTIzNjA7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ni4wMDAyIiB4PSI3ODAuMDEiIHk9IjE5Ni4zNjk3Ij4mIzEyNTI1OyYjMTI1NDA7JiMxMjUyMzsmIzEyNDk2OyYjMTI0ODM7JiMxMjQ2MzsmIzEyNDE4OyYjMjEzNjM7JiMyNDIzMTsmIzEyMzk1OyYjMjE0ODc7JiMzMzAyMTs8L3RleHQ+PC9nPjwhLS1saW5rIGRldiB0byBzdGFnaW5nLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImRldiIgZGF0YS1lbnRpdHktMj0ic3RhZ2luZyIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19kZXZfc3RhZ2luZyI+PHBhdGggZD0iTTIzNS4wMjczLDEzMC45NjU2IEMyMzUuMTM2OSwxMzAuNTM2NiAyMzUuMjQ3OSwxMzAuMTA2NiAyMzUuMzYwNCwxMjkuNjc1NyBDMjM1LjU4NTUsMTI4LjgxMzkgMjM1LjgxNjUsMTI3Ljk0ODUgMjM2LjA1MzgsMTI3LjA4IEMyNDMuNjQ1LDk5LjI4NzUgMjU3LjU1NSw2OC4zMiAyODMsNTEuNDMgQzM0MC43NywxMy4wOSAzODYuNjIsNiA0MzksNTEuNDMgQzQ0OS43NCw2MC43NDI1IDQ1Ni40NDA2LDczLjE2MTMgNDYwLjQxNyw4Ni42NzcyIEM0NjEuNDExMSw5MC4wNTYyIDQ2Mi4yMzUsOTMuNTAzNyA0NjIuOTA5MSw5Ni45ODg1IEM0NjIuOTkzNCw5Ny40MjQxIDQ2My4wNzUzLDk3Ljg2MDIgNDYzLjE1NDksOTguMjk2OSBDNDYzLjE5NDcsOTguNTE1MyA0NjIuMTg4OCw5Mi44MjU1IDQ2Mi4yMjc1LDkzLjA0NDEiIGZpbGw9Im5vbmUiIGlkPSJkZXYtdG8tc3RhZ2luZyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDYzLjI3MjYsOTguOTUyNCw0NjUuNjQzOCw4OS4zOTMyLDQ2Mi40MDE3LDk0LjAyODgsNDU3Ljc2NjEsOTAuNzg2Nyw0NjMuMjcyNiw5OC45NTI0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjEuODEzNSIgeD0iMzA5LjUiIHk9IjI4LjIxNjkiPk1lcmdlIFBSPC90ZXh0PjwvZz48IS0tbGluayBzdGFnaW5nIHRvIHByb2QtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0ic3RhZ2luZyIgZGF0YS1lbnRpdHktMj0icHJvZCIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9Imxpbmtfc3RhZ2luZ19wcm9kIj48cGF0aCBkPSJNNDY2LjAyNzMsMTMwLjk2NTYgQzQ2Ni4xMzY5LDEzMC41MzY2IDQ2Ni4yNDc5LDEzMC4xMDY2IDQ2Ni4zNjA0LDEyOS42NzU3IEM0NjYuNTg1NSwxMjguODEzOSA0NjYuODE2NSwxMjcuOTQ4NSA0NjcuMDUzOCwxMjcuMDggQzQ3NC42NDUsOTkuMjg3NSA0ODguNTU1LDY4LjMyIDUxNCw1MS40MyBDNTQ4LjA3LDI4LjgyIDY2Ny4wMSwyNC43NSA2OTgsNTEuNDMgQzcwOC43ODUsNjAuNzEyNSA3MTUuNTY1Niw3My4xMTU2IDcxOS42MzgsODYuNjI1MiBDNzIwLjY1NjEsOTAuMDAyNSA3MjEuNTA0OSw5My40NDkxIDcyMi4yMDQ3LDk2LjkzMzMgQzcyMi4yOTIyLDk3LjM2ODggNzIyLjM3NzMsOTcuODA0OSA3MjIuNDYwMiw5OC4yNDE2IEM3MjIuNTAxNiw5OC40NTk5IDcyMS40NTQ4LDkyLjc3NzcgNzIxLjQ5NTEsOTIuOTk2MyIgZmlsbD0ibm9uZSIgaWQ9InN0YWdpbmctdG8tcHJvZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNzIyLjU4MjcsOTguODk2OSw3MjQuODg1LDg5LjMyMDksNzIxLjY3NjQsOTMuOTc5OCw3MTcuMDE3NSw5MC43NzExLDcyMi41ODI3LDk4Ljg5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NC44NTAxIiB4PSI1NjEiIHk9IjI4LjIxNjkiPlByb21vdGU8L3RleHQ+PC9nPjwhLS1saW5rIHByb2QgdG8gR01OMTEtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icHJvZCIgZGF0YS1lbnRpdHktMj0iR01OMTEiIGRhdGEtc291cmNlLWxpbmU9IjE5IiBkYXRhLXVpZD0ibG5rMTMiIGlkPSJsaW5rX3Byb2RfR01OMTEiPjxwYXRoIGQ9Ik03MjYuMTY1MSwxODQuMyBDNzI2LjIzNjksMTg0LjMgNzI2LjMwODYsMTg0LjMgNzI2LjM4MDQsMTg0LjMgQzcyNi42Njc1LDE4NC4zIDcyNi45NTQ2LDE4NC4zIDcyNy4yNDE2LDE4NC4zIEM3MjcuODE1OCwxODQuMyA3MjguMzg5OSwxODQuMyA3MjguOTY0MSwxODQuMyBDNzMwLjExMjUsMTg0LjMgNzMxLjI2MDgsMTg0LjMgNzMyLjQwOTIsMTg0LjMgQzczNy4wMDI4LDE4NC4zIDc0MS41OTY5LDE4NC4zIDc0Ni4xOTEzLDE4NC4zIEM3NTUuMzgsMTg0LjMgNzY0LjU3LDE4NC4zIDc3My43NiwxODQuMyIgZmlsbD0ibm9uZSIgaWQ9InByb2QtR01OMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLVNSQz1bTk8tbkppQ200OFB0RnlLZlVyd1cwbjlJMW5RYWc4bzhtS2dFT0FNbkJTU0RHeUxHVW8xMkdoM3AwMG1Md2kyNkczcENBT1o3bTdQQmdQWHlfX3RfVHgtaVVUZG02WTR4R1FFUTFISDJ1cm44cDYzOUlqTGc5TDVRb0FST3VycGZEZVdDVTBTTHpZNW1GaURVdTNLU1F6clRpMWpzSTluUE5XalBmdEl0ZElFbjZ0RWt6Ti1ZQ0FmUWI1T2VjSTBUUDJJS2dUMU90WG5JaUp1dGVod28tVDctIC1XSEVxT0lsNTNGc2t6ZmRxaDQ5WDhmTU1PbWRQN1dYc1Ewa2F5enNCajFnSk11V1RwVlVsdXZscHE2RW1zc0dOcS1WajFlTy1IVm94LUpOdjFfOVV0OFJTa3VsLWgzdnpYeUNQR01udVdTMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_36">デプロイフロー<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Review App で検証</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/new-feature
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/new-feature
<span class="c1"># → Review App 自動作成</span>

<span class="c1"># 2. Staging へデプロイ</span>
git<span class="w"> </span>checkout<span class="w"> </span>main
git<span class="w"> </span>merge<span class="w"> </span>feature/new-feature
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
<span class="c1"># → Staging 自動デプロイ</span>

<span class="c1"># 3. Production へ Promote</span>
heroku<span class="w"> </span>pipelines:promote<span class="w"> </span>--app<span class="w"> </span>ordertaking-app-staging

<span class="c1"># 4. ロールバック（必要時）</span>
heroku<span class="w"> </span>rollback<span class="w"> </span>--app<span class="w"> </span>ordertaking-app
</code></pre></div>
<h2 id="_37">まとめ<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h2>
<h3 id="_38">インフラストラクチャの特徴<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>超シンプルな構成</strong>: モノリシックアプリケーション + InMemory DB、管理が非常に容易</li>
<li><strong>Heroku 活用</strong>: フルマネージドサービスによる運用負荷削減</li>
<li><strong>低コスト</strong>: データベース不要で月額 $25 から開始</li>
<li><strong>高速パフォーマンス</strong>: ディスク I/O なしの高速データアクセス</li>
<li><strong>自動化</strong>: CI/CD パイプラインによる自動デプロイ</li>
<li><strong>制約</strong>: データ永続性なし、Dyno 再起動でデータ消失</li>
</ol>
<h3 id="inmemory-db_1">InMemory DB の適用シーン<a class="headerlink" href="#inmemory-db_1" title="Permanent link">&para;</a></h3>
<h4 id="_39">推奨される用途<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<ul>
<li>✅ デモ・プロトタイプアプリケーション</li>
<li>✅ 開発・テスト環境</li>
<li>✅ 短期間のイベント用アプリケーション</li>
<li>✅ データ消失が許容できるアプリケーション</li>
<li>✅ ステートレスな API サーバー</li>
</ul>
<h4 id="_40">推奨されない用途<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<ul>
<li>❌ 本番環境での重要データ保存</li>
<li>❌ 長期間稼働するアプリケーション</li>
<li>❌ トランザクションデータの永続化</li>
<li>❌ コンプライアンス要件があるデータ</li>
<li>❌ マルチ Dyno 構成（データ不整合が発生）</li>
</ul>
<h3 id="_41">段階的拡張計画<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h3>
<h4 id="phase-1-inmemory-db">Phase 1: 初期構成（現在）- InMemory DB<a class="headerlink" href="#phase-1-inmemory-db" title="Permanent link">&para;</a></h4>
<ul>
<li>1 Web Dyno (Standard-1X)</li>
<li>InMemory Database（組み込み）</li>
<li>基本 Add-ons（Papertrail、SendGrid）</li>
<li><strong>月額コスト</strong>: $25</li>
<li><strong>用途</strong>: デモ、プロトタイプ、開発環境</li>
</ul>
<h4 id="phase-2">Phase 2: データ永続化対応<a class="headerlink" href="#phase-2" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>オプション A</strong>: Heroku Postgres 導入</li>
<li>Standard-0 プラン追加</li>
<li><strong>追加コスト</strong>: +$50/月</li>
<li>
<p><strong>メリット</strong>: データ永続化、バックアップ、複数 Dyno 対応</p>
</li>
<li>
<p><strong>オプション B</strong>: 外部データストア連携</p>
</li>
<li>AWS S3 / Azure Blob Storage によるスナップショット保存</li>
<li>イベントソーシング + 外部イベントストア</li>
<li><strong>追加コスト</strong>: ~$5-10/月</li>
<li><strong>メリット</strong>: 柔軟なデータ管理、イベント駆動アーキテクチャ</li>
</ul>
<h4 id="phase-3">Phase 3: スケーリング対応<a class="headerlink" href="#phase-3" title="Permanent link">&para;</a></h4>
<ul>
<li>オートスケーリング有効化（1-5 dynos）</li>
<li>Database 接続プール最適化（Postgres 使用時）</li>
<li>パフォーマンスモニタリング強化</li>
<li>Redis キャッシュ導入</li>
</ul>
<h4 id="phase-4">Phase 4: エンタープライズ対応<a class="headerlink" href="#phase-4" title="Permanent link">&para;</a></h4>
<ul>
<li>Dyno タイプアップグレード（Performance-M）</li>
<li>Database プラン変更（Premium-0）</li>
<li>CDN 導入（Cloudflare/Fastly）</li>
<li>本格的な監視・アラート体制</li>
</ul>
<h4 id="phase-5">Phase 5: マイクロサービス移行（将来）<a class="headerlink" href="#phase-5" title="Permanent link">&para;</a></h4>
<ul>
<li>サービス分割検討</li>
<li>Kubernetes 移行検討</li>
<li>イベント駆動アーキテクチャ強化</li>
<li>CQRS パターン導入</li>
</ul>
<h3 id="_42">結論<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h3>
<p>本設計により、F# 関数型ドメインモデリングによる注文受付システムを、Heroku 上で<strong>最小限のコスト（月額 $25）</strong>で運用できます。</p>
<p><strong>InMemory DB は開発・デモ環境に最適</strong>ですが、本番環境での使用には注意が必要です。データ永続化が必要になった場合は、Phase 2 の拡張計画に従って PostgreSQL または外部データストアを導入してください。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works" target="_blank" rel="noopener" title="GitHub Repository/claude-code-booster" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>