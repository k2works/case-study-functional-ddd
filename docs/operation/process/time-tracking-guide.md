# 時間記録ガイド

## 目的

イテレーション 1 から、全タスクで実績時間を記録します。これにより以下が可能になります：

- ベロシティの正確な測定
- 見積もり精度の向上
- イテレーション計画の改善
- チームの生産性分析

## 時間記録方法

### 基本原則

1. **すべてのタスク**で実績時間を記録する
2. **作業開始時と完了時**に記録する
3. **Git コミットメッセージ**に含める

### 記録フォーマット

```
[時間: Xh] タスク内容

詳細説明...

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

#### パラメータ

- **X**: 実績時間（小数点第 1 位まで）
  - 例: `0.5h`, `1.5h`, `2.0h`
- **タスク内容**: タスク ID と簡潔な説明
  - 例: `PT-1.1 時間記録方法の決定`

### 記録例

#### 例 1: プロセス改善タスク

```
[時間: 0.5h] PT-1.1 時間記録方法の決定

Git コミットメッセージによる時間記録方法を採用。
フォーマット: [時間: Xh] タスク内容

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

#### 例 2: 技術検証タスク

```
[時間: 1.5h] TT-1.1 Cake タスクの個別実行確認

以下のタスクを実行して動作確認：
- Clean, Restore, Build, Test: 正常動作
- Coverage: タスク未定義（追加実装が必要）
- Quality: パスエラー（src/ ディレクトリ不在）

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

#### 例 3: ドキュメント作成タスク

```
[時間: 2.0h] DT-1.2 .NET SDK インストール手順の作成

Windows/Mac/Linux 別の .NET 9.0 SDK インストール手順を作成。
スクリーンショット付きで詳細化。

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

## 時間の計測方法

### 推奨ツール

#### 方法 1: Git コミット時に記録（最もシンプル）

作業完了時にコミットメッセージに実績時間を記入。

**メリット**:
- 追加ツール不要
- Git 履歴に自動記録
- チーム全員が確認可能

**デメリット**:
- コミット忘れで記録漏れ
- リアルタイム計測不可

#### 方法 2: 専用タイムトラッキングツール（オプション）

- [Toggl Track](https://toggl.com/)
- [Clockify](https://clockify.me/)
- [Harvest](https://www.getharvest.com/)

**メリット**:
- リアルタイム計測
- 自動レポート生成
- プロジェクト横断集計

**デメリット**:
- 別途ツール導入が必要
- Git との同期が手動

### 推奨フロー

```
1. タスク開始時
   - メモに開始時刻を記録
   - または専用ツールでタイマー開始

2. タスク完了時
   - 経過時間を計算
   - Git コミットメッセージに記録
   - [時間: Xh] 形式で記入
```

## 時間の集計

### イテレーション終了時

以下のコマンドで時間を集計：

```bash
# イテレーション期間のコミットから時間を抽出
git log --since="2025-01-20" --until="2025-02-02" \
  --pretty=format:"%s" \
  | grep -oP '\[時間: \K[0-9.]+(?=h\])' \
  | awk '{sum += $1} END {print "合計: " sum "h"}'
```

### タスク別集計

```bash
# PT-1 の時間集計
git log --all --pretty=format:"%s" \
  | grep "PT-1" \
  | grep -oP '\[時間: \K[0-9.]+(?=h\])' \
  | awk '{sum += $1} END {print "PT-1 合計: " sum "h"}'
```

## 見積もり精度の分析

### 計算式

```
見積もり精度 = (実績時間 - 計画時間) ÷ 計画時間 × 100%
```

### 判定基準

- **±30% 以内**: 良好
- **±30% ~ ±50%**: 改善の余地あり
- **±50% 超**: 見積もり方法の見直しが必要

### 例

- **計画**: 2.0h
- **実績**: 2.5h
- **精度**: (2.5 - 2.0) ÷ 2.0 × 100% = **+25%** → 良好

## ベロシティの測定

### 計算式

```
ベロシティ = 完了ストーリーポイント ÷ イテレーション期間
```

### 例（イテレーション 1）

- **完了 SP**: 0 SP（設計のみ、実装は次イテレーション）
- **期間**: 2 週間
- **ベロシティ**: 0 SP / 2 週 = **0 SP/週**

※ イテレーション 1 は環境整備が主目的のため、ベロシティは低い想定

## 注意事項

### 必須ルール

1. **すべてのコミット**に時間を記録
2. **正確な時間**を記録（過小・過大評価しない）
3. **作業完了後すぐ**に記録（忘れないうちに）

### 禁止事項

- ❌ 時間の水増し・過小申告
- ❌ 複数タスクの時間を合算
- ❌ 記録の後回し（記憶に頼ると不正確）

### トラブルシューティング

#### Q: タスクが長時間かかった場合は？

A: 正確な実績時間を記録。計画との差異は見積もり精度分析に活用。

#### Q: 複数タスクを同時進行した場合は？

A: 各タスクを別コミットで記録。時間は分割して計測。

#### Q: 割り込み作業が発生した場合は？

A: 割り込み作業も別タスクとして時間記録。タスク ID は `MISC-X` 等。

## チームコミットメント

### 開発チーム全員

- ✅ すべてのタスクで実績時間を記録
- ✅ [時間: Xh] フォーマットを厳守
- ✅ 作業完了後すぐに記録
- ✅ デイリースタンドアップで進捗共有

### スクラムマスター

- ✅ 時間記録の徹底を促進
- ✅ イテレーション終了時に集計
- ✅ 見積もり精度を分析
- ✅ 改善アクションを提案

## 参考資料

- [イテレーション 1 計画](../development/iteration_plan-1.md)
- [イテレーション 0 レトロスペクティブ](../development/retrospective-0.md)
- [リリース・イテレーション計画ガイド](../reference/リリース・イテレーション計画ガイド.md)

---

**作成日**: 2025-11-10
**最終更新**: 2025-11-10
**バージョン**: 1.0
